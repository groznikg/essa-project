<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ZAP Scanning Report</title>
    <link href="./normalize/normalize.css" rel="stylesheet" />
    <link href="./themes/original/main.css" rel="stylesheet" />
    <link href="./themes/original/colors.css" rel="stylesheet" />
  </head>
  <body>
    <header>
      <h1>ZAP Scanning Report</h1>
      <p>
        <span>Generated with</span>
        <a href="https://zaproxy.org"
          ><img
            src="./zap32x32.png"
            alt="The ZAP logo"
            class="zap-logo"
          />ZAP</a
        >
        <span>on Sun 19 Nov 2023, at 11:19:01</span>
      </p>
      <p>ZAP Version: 2.14.0</p>
    </header>

    <main>
      <section id="contents" class="contents">
        <h2>Contents</h2>
        <nav>
          <ol>
            <li>
              <a href="#about-this-report">About this report</a>
              <ol>
                <li><a href="#report-parameters">Report parameters</a></li>
              </ol>
            </li>
            <data-th-block>
              <li>
                <a href="#summaries">Summaries</a>
                <ol>
                  <li>
                    <a href="#risk-confidence-counts"
                      >Alert counts by risk and confidence</a
                    >
                  </li>
                  <li>
                    <a href="#site-risk-counts"
                      >Alert counts by site and risk</a
                    >
                  </li>
                  <li>
                    <a href="#alert-type-counts">Alert counts by alert type</a>
                  </li>
                </ol>
              </li>
              <li>
                <a href="#alerts">Alerts</a>
                <ol>
                  <li>
                    <a href="#alerts--risk-2-confidence-3"
                      ><span>Risk</span>=<span class="risk-level">Medium</span>,
                      <span>Confidence</span>=<span class="confidence-level"
                        >High</span
                      >
                      <span>(1)</span></a
                    >
                  </li>

                  <li>
                    <a href="#alerts--risk-2-confidence-2"
                      ><span>Risk</span>=<span class="risk-level">Medium</span>,
                      <span>Confidence</span>=<span class="confidence-level"
                        >Medium</span
                      >
                      <span>(2)</span></a
                    >
                  </li>

                  <li>
                    <a href="#alerts--risk-1-confidence-3"
                      ><span>Risk</span>=<span class="risk-level">Low</span>,
                      <span>Confidence</span>=<span class="confidence-level"
                        >High</span
                      >
                      <span>(1)</span></a
                    >
                  </li>

                  <li>
                    <a href="#alerts--risk-1-confidence-2"
                      ><span>Risk</span>=<span class="risk-level">Low</span>,
                      <span>Confidence</span>=<span class="confidence-level"
                        >Medium</span
                      >
                      <span>(1)</span></a
                    >
                  </li>

                  <li>
                    <a href="#alerts--risk-0-confidence-3"
                      ><span>Risk</span>=<span class="risk-level"
                        >Informational</span
                      >, <span>Confidence</span>=<span class="confidence-level"
                        >High</span
                      >
                      <span>(1)</span></a
                    >
                  </li>

                  <li>
                    <a href="#alerts--risk-0-confidence-2"
                      ><span>Risk</span>=<span class="risk-level"
                        >Informational</span
                      >, <span>Confidence</span>=<span class="confidence-level"
                        >Medium</span
                      >
                      <span>(3)</span></a
                    >
                  </li>

                  <li>
                    <a href="#alerts--risk-0-confidence-1"
                      ><span>Risk</span>=<span class="risk-level"
                        >Informational</span
                      >, <span>Confidence</span>=<span class="confidence-level"
                        >Low</span
                      >
                      <span>(2)</span></a
                    >
                  </li>
                </ol>
              </li>
              <li>
                <a href="#appendix">Appendix</a>
                <ol>
                  <li><a href="#alert-types">Alert types</a></li>
                </ol>
              </li>
            </data-th-block>
          </ol>
        </nav>
      </section>

      <section id="about-this-report" class="about-this-report">
        <h2>About this report</h2>

        <section id="report-parameters">
          <h3>Report parameters</h3>
          <div class="report-parameters--container">
            <h4>Contexts</h4>

            <p>
              No contexts were selected, so all contexts were included by
              default.
            </p>

            <h4>Sites</h4>

            <p>The following sites were included:</p>
            <ul class="sites-list">
              <li><span class="site">https://accounts.google.com</span></li>
              <li><span class="site">https://localhost:3000</span></li>
            </ul>

            <p>
              (If no sites were selected, all sites were included by default.)
            </p>
            <p>
              An included site must also be within one of the included contexts
              for its data to be included in the report.
            </p>

            <h4>Risk levels</h4>
            <p>
              <span>Included</span>:

              <span class="included-risk-codes"
                ><span class="risk-level">High</span>,
                <span class="risk-level">Medium</span>,
                <span class="risk-level">Low</span>,
                <span class="risk-level">Informational</span></span
              >
            </p>
            <p>
              <span>Excluded</span>:
              <span>None</span>
            </p>

            <h4>Confidence levels</h4>
            <p>
              <span>Included</span>:

              <span class="included-confidence-codes"
                ><span class="confidence-level">User Confirmed</span>,
                <span class="confidence-level">High</span>,
                <span class="confidence-level">Medium</span>,
                <span class="confidence-level">Low</span></span
              >
            </p>
            <p>
              <span>Excluded</span>:

              <span class="included-confidence-codes">
                <span class="confidence-level">User Confirmed</span>,
                <span class="confidence-level">High</span>,
                <span class="confidence-level">Medium</span>,
                <span class="confidence-level">Low</span>,
                <span class="confidence-level">False Positive</span></span
              >
            </p>
          </div>
        </section>
      </section>

      <section></section>

      <section id="summaries" class="summaries">
        <h2>Summaries</h2>

        <section id="risk-confidence-counts">
          <h3>Alert counts by risk and confidence</h3>
          <table class="risk-confidence-counts-table">
            <caption>
              <p>
                This table shows the number of alerts for each level of risk and
                confidence included in the report.
              </p>
              <p>
                (The percentages in brackets represent the count as a percentage
                of the total number of alerts included in the report, rounded to
                one decimal place.)
              </p>
            </caption>
            <colgroup>
              <col />
              <col />
            </colgroup>
            <colgroup>
              <col style="width: 14%" />
              <col style="width: 14%" />
              <col style="width: 14%" />
              <col style="width: 14%" />
              <col style="width: 14%" />
            </colgroup>
            <thead>
              <tr>
                <td colspan="2" rowspan="2"></td>
                <th scope="colgroup" colspan="5">Confidence</th>
              </tr>
              <tr>
                <th scope="col">User Confirmed</th>
                <th scope="col">High</th>
                <th scope="col">Medium</th>
                <th scope="col">Low</th>
                <th scope="col">Total</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="rowgroup" rowspan="5">Risk</th>
                <th scope="row">High</th>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">Medium</th>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>1</span><br />
                  <span class="additional-info-percentages">(9.1%)</span>
                </td>
                <td>
                  <span>2</span><br />
                  <span class="additional-info-percentages">(18.2%)</span>
                </td>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>3</span><br />
                  <span class="additional-info-percentages">(27.3%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">Low</th>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>1</span><br />
                  <span class="additional-info-percentages">(9.1%)</span>
                </td>
                <td>
                  <span>1</span><br />
                  <span class="additional-info-percentages">(9.1%)</span>
                </td>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>2</span><br />
                  <span class="additional-info-percentages">(18.2%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">Informational</th>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>1</span><br />
                  <span class="additional-info-percentages">(9.1%)</span>
                </td>
                <td>
                  <span>3</span><br />
                  <span class="additional-info-percentages">(27.3%)</span>
                </td>
                <td>
                  <span>2</span><br />
                  <span class="additional-info-percentages">(18.2%)</span>
                </td>
                <td>
                  <span>6</span><br />
                  <span class="additional-info-percentages">(54.5%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">Total</th>
                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0.0%)</span>
                </td>
                <td>
                  <span>3</span><br />
                  <span class="additional-info-percentages">(27.3%)</span>
                </td>
                <td>
                  <span>6</span><br />
                  <span class="additional-info-percentages">(54.5%)</span>
                </td>
                <td>
                  <span>2</span><br />
                  <span class="additional-info-percentages">(18.2%)</span>
                </td>
                <td>
                  <span>11</span><br />
                  <span class="additional-info-percentages">(100%)</span>
                </td>
              </tr>
            </tbody>
          </table>
        </section>

        <section id="site-risk-counts">
          <h3>Alert counts by site and risk</h3>
          <table class="site-risk-counts-table">
            <caption>
              <p>
                This table shows, for each site for which one or more alerts
                were raised, the number of alerts raised at each risk level.
              </p>
              <p>
                Alerts with a confidence level of "False Positive" have been
                excluded from these counts.
              </p>
              <p>
                (The numbers in brackets are the number of alerts raised for the
                site at or above that risk level.)
              </p>
            </caption>
            <colgroup>
              <col />
              <col />
            </colgroup>
            <colgroup>
              <col style="width: 16.25%" />
              <col style="width: 16.25%" />
              <col style="width: 16.25%" />
              <col style="width: 16.25%" />
            </colgroup>
            <thead>
              <tr>
                <td colspan="2" rowspan="2"></td>
                <th scope="colgroup" colspan="4">Risk</th>
              </tr>
              <tr>
                <th scope="col">
                  <span>High</span><br />
                  <span class="additional-info-percentages">(= High)</span>
                </th>
                <th scope="col">
                  <span>Medium</span><br />
                  <span class="additional-info-percentages"
                    >(&gt;= Medium)</span
                  >
                </th>
                <th scope="col">
                  <span>Low</span><br />
                  <span class="additional-info-percentages">(&gt;= Low)</span>
                </th>
                <th scope="col">
                  <span>Informational</span><br />
                  <span class="additional-info-percentages"
                    >(&gt;= Informational)</span
                  >
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="rowgroup" rowspan="1">Site</th>
                <th scope="row">https://localhost:3000</th>

                <td>
                  <span>0</span><br />
                  <span class="additional-info-percentages">(0)</span>
                </td>
                <td>
                  <span>3</span><br />
                  <span class="additional-info-percentages">(3)</span>
                </td>
                <td>
                  <span>2</span><br />
                  <span class="additional-info-percentages">(5)</span>
                </td>
                <td>
                  <span>6</span><br />
                  <span class="additional-info-percentages">(11)</span>
                </td>
              </tr>
            </tbody>
          </table>
        </section>

        <section id="alert-type-counts">
          <h3>Alert counts by alert type</h3>
          <table class="alert-type-counts-table">
            <caption>
              <p>
                This table shows the number of alerts of each alert type,
                together with the alert type's risk level.
              </p>
              <p>
                (The percentages in brackets represent each count as a
                percentage, rounded to one decimal place, of the total number of
                alerts included in this report.)
              </p>
            </caption>
            <thead>
              <tr>
                <th scope="col">Alert type</th>
                <th scope="col">Risk</th>
                <th scope="col">Count</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">
                  <a href="#alert-type-0">Application Error Disclosure</a>
                </th>
                <td class="risk-level">Medium</td>
                <td>
                  <span>1</span><br />
                  <span class="additional-info-percentages">(9.1%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-1"
                    >Content Security Policy (CSP) Header Not Set</a
                  >
                </th>
                <td class="risk-level">Medium</td>
                <td>
                  <span>19</span><br />
                  <span class="additional-info-percentages">(172.7%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-2">Cross-Domain Misconfiguration</a>
                </th>
                <td class="risk-level">Medium</td>
                <td>
                  <span>55</span><br />
                  <span class="additional-info-percentages">(500.0%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-3"
                    >Information Disclosure - Debug Error Messages</a
                  >
                </th>
                <td class="risk-level">Low</td>
                <td>
                  <span>1</span><br />
                  <span class="additional-info-percentages">(9.1%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-4"
                    >Strict-Transport-Security Header Not Set</a
                  >
                </th>
                <td class="risk-level">Low</td>
                <td>
                  <span>55</span><br />
                  <span class="additional-info-percentages">(500.0%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-5">Authentication Request Identified</a>
                </th>
                <td class="risk-level">Informational</td>
                <td>
                  <span>1</span><br />
                  <span class="additional-info-percentages">(9.1%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-6"
                    >Information Disclosure - Suspicious Comments</a
                  >
                </th>
                <td class="risk-level">Informational</td>
                <td>
                  <span>21</span><br />
                  <span class="additional-info-percentages">(190.9%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-7">Modern Web Application</a>
                </th>
                <td class="risk-level">Informational</td>
                <td>
                  <span>19</span><br />
                  <span class="additional-info-percentages">(172.7%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-8"
                    >Re-examine Cache-control Directives</a
                  >
                </th>
                <td class="risk-level">Informational</td>
                <td>
                  <span>25</span><br />
                  <span class="additional-info-percentages">(227.3%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-9"
                    >Session Management Response Identified</a
                  >
                </th>
                <td class="risk-level">Informational</td>
                <td>
                  <span>6</span><br />
                  <span class="additional-info-percentages">(54.5%)</span>
                </td>
              </tr>
              <tr>
                <th scope="row">
                  <a href="#alert-type-10">User Agent Fuzzer</a>
                </th>
                <td class="risk-level">Informational</td>
                <td>
                  <span>48</span><br />
                  <span class="additional-info-percentages">(436.4%)</span>
                </td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th scope="row">Total</th>
                <td></td>
                <td>11</td>
              </tr>
            </tfoot>
          </table>
        </section>
      </section>

      <section id="alerts" class="alerts">
        <h2>Alerts</h2>
        <ol>
          <li id="alerts--risk-2-confidence-3">
            <h3>
              <span>Risk</span>=<span class="risk-level">Medium</span>,
              <span>Confidence</span>=<span class="confidence-level">High</span>
              <span>(1)</span>
            </h3>
            <ol>
              <li class="alerts--site-li">
                <h4>
                  <span class="site">https://localhost:3000</span>
                  <span>(1)</span>
                </h4>
                <ol>
                  <li>
                    <h5>
                      <a href="#alert-type-1"
                        >Content Security Policy (CSP) Header Not Set</a
                      >
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >GET https://localhost:3000/login</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list">
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/Top10/A05_2021-Security_Misconfiguration/"
                                          >OWASP_2021_A05</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-top-ten/2017/A6_2017-Security_Misconfiguration.html"
                                          >OWASP_2017_A06</a
                                        ></span
                                      >
                                    </li>
                                  </ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    Content Security Policy (CSP) is an added
                                    layer of security that helps to detect and
                                    mitigate certain types of attacks, including
                                    Cross Site Scripting (XSS) and data
                                    injection attacks. These attacks are used
                                    for everything from data theft to site
                                    defacement or distribution of malware. CSP
                                    provides a set of standard HTTP headers that
                                    allow website owners to declare approved
                                    sources of content that browsers should be
                                    allowed to load on that page â€” covered types
                                    are JavaScript, CSS, HTML frames, fonts,
                                    images and embeddable objects such as Java
                                    applets, ActiveX, audio and video files.
                                  </p>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (235
                                      bytes)
                                    </summary>

                                    <pre><code>GET https://localhost:3000/login HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (0 bytes)</summary>

                                    <pre><code></code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (414 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Accept-Ranges: bytes
Cache-Control: public, max-age=0
Last-Modified: Sun, 19 Nov 2023 09:20:50 GMT
ETag: W/"31d-18be6e1f7cf"
Content-Type: text/html; charset=UTF-8
Content-Length: 797
Date: Sun, 19 Nov 2023 10:13:21 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body" open="open">
                                    <summary>Response body (797 bytes)</summary>

                                    <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"/&gt;
    &lt;title&gt;MyFishingDiary&lt;/title&gt;
    &lt;base href="/"/&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1"/&gt;
    &lt;link rel="icon" type="image/x-icon" href="favicon.ico"/&gt;
    &lt;link rel="manifest" href="manifest.webmanifest"&gt;
  &lt;meta name="theme-color" content="#1976d2"&gt;
&lt;link rel="stylesheet" href="styles.css"&gt;&lt;/head&gt;
  &lt;body class="dx-viewport"&gt;
    &lt;app-root&gt;&lt;/app-root&gt;
    &lt;noscript&gt;Please enable JavaScript to continue using this application.&lt;/noscript&gt;
&lt;script src="runtime.js" type="module"&gt;&lt;/script&gt;&lt;script src="polyfills.js" type="module"&gt;&lt;/script&gt;&lt;script src="scripts.js" defer&gt;&lt;/script&gt;&lt;script src="vendor.js" type="module"&gt;&lt;/script&gt;&lt;script src="main.js" type="module"&gt;&lt;/script&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                                  </details>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    Ensure that your web server, application
                                    server, load balancer, etc. is configured to
                                    set the Content-Security-Policy header.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>

          <li id="alerts--risk-2-confidence-2">
            <h3>
              <span>Risk</span>=<span class="risk-level">Medium</span>,
              <span>Confidence</span>=<span class="confidence-level"
                >Medium</span
              >
              <span>(2)</span>
            </h3>
            <ol>
              <li class="alerts--site-li">
                <h4>
                  <span class="site">https://localhost:3000</span>
                  <span>(2)</span>
                </h4>
                <ol>
                  <li>
                    <h5>
                      <a href="#alert-type-0">Application Error Disclosure</a>
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >GET https://localhost:3000/api/swagger.json</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list">
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-web-security-testing-guide/v42/4-Web_Application_Security_Testing/08-Testing_for_Error_Handling/02-Testing_for_Stack_Traces"
                                          >WSTG-v42-ERRH-02</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-web-security-testing-guide/v42/4-Web_Application_Security_Testing/08-Testing_for_Error_Handling/01-Testing_For_Improper_Error_Handling"
                                          >WSTG-v42-ERRH-01</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/Top10/A05_2021-Security_Misconfiguration/"
                                          >OWASP_2021_A05</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-top-ten/2017/A6_2017-Security_Misconfiguration.html"
                                          >OWASP_2017_A06</a
                                        ></span
                                      >
                                    </li>
                                  </ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    This page contains an error/warning message
                                    that may disclose sensitive information like
                                    the location of the file that produced the
                                    unhandled exception. This information can be
                                    used to launch further attacks against the
                                    web application. The alert could be a false
                                    positive if the error message is found
                                    inside a documentation page.
                                  </p>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (276
                                      bytes)
                                    </summary>

                                    <pre><code>GET https://localhost:3000/api/swagger.json HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache
Accept: application/json,*/*

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (0 bytes)</summary>

                                    <pre><code></code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (338 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Content-Length: 45919
ETag: W/"b35f-oqzTyqeXNGYxdKzaYkE45VrTgDA"
Date: Sun, 19 Nov 2023 10:12:33 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body">
                                    <summary>
                                      Response body (45919 bytes)
                                    </summary>

                                    <pre><code>{"openapi":"3.0.3","info":{"title":"MyFishingDiary","version":"0.1.0"},"tags":[{"name":"Trips","description":"Fishing &lt;b&gt;trips&lt;/b&gt;"},{"name":"Comments","description":"&lt;b&gt;Comments&lt;/b&gt; of fishing trip"},{"name":"Fish","description":"&lt;b&gt;Fish&lt;/b&gt; caught on a fishing trip"},{"name":"FishingGroup","description":"&lt;b&gt;Fishing groups&lt;/b&gt;"},{"name":"Authentication","description":"&lt;b&gt;User management&lt;/b&gt; and authentication."}],"servers":[{"url":"https://localhost:3000/api","description":"Secure development server for testing"},{"url":"http://localhost:3000/api","description":"Development server for testing"},{"url":"https://my-fishing-diary.onrender.com/api","description":"Production server"}],"components":{"securitySchemes":{"jwt":{"type":"http","scheme":"bearer","in":"header","bearerFormat":"JWT"}},"schemas":{"ErrorMessage":{"type":"object","properties":{"message":{"type":"string","description":"Message describing the error."}},"required":["message"]},"FishingGroup":{"type":"object","description":"&lt;b&gt;Fishing group&lt;/b&gt;.","properties":{"_id":{"type":"string","description":"unique identifier"},"name":{"type":"string","description":"name of the Fishing group"},"creator":{"type":"string","description":"email of creator of the Fishing group"},"users":{"type":"array","items":{"type":"string"},"description":"emails of members of the Fishing group"},"description":{"type":"string","description":"description of the Fishing group"}},"required":["_id","name"]},"Comment":{"type":"object","description":"Comment about fishing trip.","properties":{"_id":{"type":"string","description":"&lt;b&gt;unique identifier&lt;/b&gt; of comment","example":"635a62f5dc5d7968e68464be"},"author":{"type":"string","description":"&lt;b&gt;name of the author&lt;/b&gt; of the comment","example":"test@test.com"},"comment":{"type":"string","description":"&lt;b&gt;comment&lt;/b&gt; about the location","example":"What bait did you use?"},"createdOn":{"type":"string","description":"&lt;b&gt;date&lt;/b&gt; of the comment &lt;b&gt;creation&lt;/b&gt;","format":"date-time","example":"2022-12-25T17:43:00.000Z"}},"required":["_id","author","comment","createdOn"]},"Fish":{"type":"object","description":"Fish caught on a fishing trip.","properties":{"_id":{"type":"string","description":"&lt;b&gt;unique identifier&lt;/b&gt; of fish","example":"635a62f5dc5d7968e68464be"},"species":{"type":"string","description":"&lt;b&gt;species&lt;/b&gt; of the fish","example":"Carp"},"weight":{"type":"number","description":"&lt;b&gt;weight&lt;/b&gt; of the fsh in kg","example":5.21},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of the fish","example":"She is a real beauty"}},"required":["_id","species"]},"Trip":{"type":"object","description":"Fishing &lt;b&gt;trip&lt;/b&gt;.","properties":{"_id":{"type":"string","description":"unique identifier"},"name":{"type":"string","description":"name of the trip"},"type":{"type":"string","description":"type of the fish"},"user":{"type":"string","description":"email of the fisherman"},"description":{"type":"string","description":"description of the trip"},"fish":{"type":"array","items":{"$ref":"#/components/schemas/Fish"}},"coordinates":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2,"description":"GPS coordinates of the trip"},"comments":{"type":"array","items":{"$ref":"#/components/schemas/Comment"}}},"required":["_id","name","type","user"]},"User":{"type":"object","description":"User of the application.","properties":{"email":{"type":"string","format":"email","description":"email of the user","example":"test@email.com"},"name":{"type":"string","description":"name and surname of the user","example":"Test User","writeOnly":true},"password":{"type":"string","description":"password of the user","example":"test"}},"required":["email","name","password"]},"Authentication":{"type":"object","description":"Authentication token of the user.","properties":{"token":{"type":"string","description":"JWT token","example":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI1NTZiZWRmNDhmOTUzOTViMTlhNjc1ODgiLCJlbWFpbCI6InNpbW9uQGZ1bGxzdGFja3RyYWluaW5nLmNvbSIsIm5hbWUiOiJTaW1vbiBIb2xtZXMiLCJleHAiOjE0MzUwNDA0MTgsImlhdCI6MTQzNDQzNTYxOH0.GD7UrfnLk295rwvIrCikbkAKctFFoRCHotLYZwZpdlE"}},"required":["token"]}}},"paths":{"/register":{"post":{"summary":"Register a new user","description":"&lt;b&gt;Register a new user&lt;/b&gt; with name, email and password.","tags":["Authentication"],"requestBody":{"description":"User object","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/User"}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with JWT token.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authentication"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"All fields required."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/login":{"post":{"summary":"Login a user","description":"&lt;b&gt;Login an existing user&lt;/b&gt; with email and password.","tags":["Authentication"],"requestBody":{"description":"User credentials","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"email of the user","example":"test@email.com"},"password":{"type":"string","description":"password of the user","example":"test"}},"required":["email","password"]}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with JWT token.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authentication"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"All fields required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"incorrect username":{"value":{"message":"Incorrect username."}},"incorrect password":{"value":{"message":"Incorrect password."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}/comments":{"post":{"summary":"Add a new comment to a given trip.","description":"Add a new **comment** with comment's content to a trip with given unique identifier.","tags":["Comments"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Comment's content.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"comment":{"type":"string","description":"&lt;b&gt;content&lt;/b&gt; of comment","example":"What bait did you use?"}},"required":["comment"]}}}},"responses":{"201":{"description":"&lt;b&gt;Created&lt;/b&gt;, with comment details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId is required":{"value":{"message":"Path parameter 'tripId' is required."}},"author comment are required":{"value":{"message":"Body parameter 'comment' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Trip with id '735a62f5dc5d7968e68467e3' not found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}/comments/{commentId}":{"get":{"summary":"Retrieve a specific comment of a given trip.","description":"Retrieve details of a **comment** of a given trip.","tags":["Comments"],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","example":"635a62f5dc5d7968e6846574"},{"name":"commentId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of comment","example":"635a62f5dc5d7968e68464be"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with trip details.","content":{"application/json":{"schema":{"type":"object","properties":{"trip":{"type":"object","properties":{"_id":{"type":"string","description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","example":"635a62f5dc5d7968e6846574"},"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of the trip","example":"Carp fishing on lake Bled"}}},"comment":{"$ref":"#/components/schemas/Comment"}}}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '73512fc5022f6bd9e0dfe53e' not found."}},"comment not found":{"value":{"message":"Comment with id '1' not found."}},"no comments found":{"value":{"message":"No comments found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"put":{"summary":"Change existing comment of a given trip.","description":"Change existing **comment** with author's name and comment's content to a trip with given unique identifier.","tags":["Comments"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"},{"name":"commentId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of comment","required":true,"example":"636346e7171e084ff4e4bbf9"}],"requestBody":{"description":"Comment's author and content.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"comment":{"type":"string","description":"&lt;b&gt;content&lt;/b&gt; of comment","example":"What bait did you use?"}},"required":["comment"]}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated comment details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId and commentId are required":{"value":{"message":"Path parameters 'tripId' and 'commentId' are required."}},"comment is required":{"value":{"message":"Parameter 'comment' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this comment."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}},"comment not found":{"value":{"message":"Comment with id '736346e7171e084ff4e4bbf9' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"delete":{"summary":"Delete existing comment from a given trip.","description":"Delete existing **comment** with a given unique identifier from a trip with given unique identifier.","tags":["Comments"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"},{"name":"commentId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of comment","required":true,"example":"636346e7171e084ff4e4bbf9"}],"responses":{"204":{"description":"&lt;b&gt;No Content&lt;/b&gt;, with no content."},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameters 'tripId' and 'commentId' are required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this comment."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}},"comment not found":{"value":{"message":"Comment with id '736346e7171e084ff4e4bbf9' not found."}},"no comments found":{"value":{"message":"No comments found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}/fish":{"post":{"summary":"Add a new fish to a given trip.","description":"Add a new **fish** with species, weight and description to a trip with given unique identifier.","tags":["Fish"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Fish's species, weight and description.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"species":{"type":"string","description":"&lt;b&gt;species&lt;/b&gt; of fish","example":"Carp"},"weight":{"type":"number","description":"&lt;b&gt;weight&lt;/b&gt; of fish in kg","example":5.21},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of fish","example":"She is a real beauty"}},"required":["species"]}}}},"responses":{"201":{"description":"&lt;b&gt;Created&lt;/b&gt;, with fish details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Fish"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId is required":{"value":{"message":"Path parameter 'tripId' is required."}},"species is required":{"value":{"message":"Body parameter 'species' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to add fish to this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Trip with id '735a62f5dc5d7968e68467e3' not found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}/fish/{fishId}":{"get":{"summary":"Retrieve a specific fish of a given trip.","description":"Retrieve details of a **fish** of a given trip.","tags":["Fish"],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","example":"635a62f5dc5d7968e6846574"},{"name":"fishId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fish","example":"635a62f5dc5d7968e68464be"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with trip details.","content":{"application/json":{"schema":{"type":"object","properties":{"trip":{"type":"object","properties":{"_id":{"type":"string","description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","example":"635a62f5dc5d7968e6846574"},"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of the trip","example":"Carp fishing on lake Bled"}}},"fish":{"$ref":"#/components/schemas/Fish"}}}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '73512fc5022f6bd9e0dfe53e' not found."}},"fish not found":{"value":{"message":"Fish with id '1' not found."}},"no fish found":{"value":{"message":"No fish found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"put":{"summary":"Change existing fish to a given trip.","description":"Change existing **fish** with species, weight and description to a trip with given unique identifier.","tags":["Fish"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"},{"name":"fishId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fish","required":true,"example":"636346e7171e084ff4e4bbf9"}],"requestBody":{"description":"Fish's species, weight and description.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"species":{"type":"string","description":"&lt;b&gt;species&lt;/b&gt; of fish","example":"Carp"},"weight":{"type":"number","description":"&lt;b&gt;WEight&lt;/b&gt; of fish in kg","example":5.21},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of fish","example":"Very aggressive"}}}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated fish details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Fish"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId and fishId are required":{"value":{"message":"Path parameters 'tripId' and 'fishId' are required."}},"species, weight or description is required":{"value":{"message":"At least one of parameters 'species', 'weight' and 'description' are required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this fish."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}},"fish not found":{"value":{"message":"Fish with id '736346e7171e084ff4e4bbf9' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"delete":{"summary":"Delete existing fish from a given trip.","description":"Delete existing **fish** with a given unique identifier from a trip with given unique identifier.","tags":["Fish"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"},{"name":"fishId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fish","required":true,"example":"636346e7171e084ff4e4bbf9"}],"responses":{"204":{"description":"&lt;b&gt;No Content&lt;/b&gt;, with no content."},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameters 'tripId' and 'fishId' are required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this fish."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}},"fish not found":{"value":{"message":"Fish with id '736346e7171e084ff4e4bbf9' not found."}},"no fish found":{"value":{"message":"No fish found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/fishing-group":{"get":{"summary":"Retrieve all fishing groups.","description":"Retrieve all **fishing groups**.","tags":["FishingGroup"],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with list of fishing groups.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Ljubljana group","creator":"John Doe"}]}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"No fishing groups found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"post":{"summary":"Add a new fishing group.","description":"Add a new **fishing group**.","tags":["FishingGroup"],"security":[{"jwt":[]}],"requestBody":{"description":"New fishing group's data.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of fishing group","example":"Ljubljana fishing club"},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of the fishing group","example":"We fish in Ljubljana!"}},"required":["name"]}}}},"responses":{"201":{"description":"&lt;b&gt;Created&lt;/b&gt;, with details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"name and type are required.":{"value":{"message":"Parameter 'name' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/fishing-group/{fishingGroupId}":{"put":{"summary":"Change existing fishing group.","description":"Change existing **fishing group** with given unique identifier.","tags":["FishingGroup"],"security":[{"jwt":[]}],"parameters":[{"name":"fishingGroupId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of a fishing group","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Fishing group's name and description.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of a fishing group","example":"New group name"},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of a fishing group","example":"Same group with a new description."}}}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"fishingGroupId is required":{"value":{"message":"Path parameter 'fishingGroupId' is required."}},"at least one body parameter is required":{"value":{"message":"At least on of body parameters is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Fishing group with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"delete":{"summary":"Delete existing fishing group.","description":"Delete existing **fishing group** with a given unique identifier.","tags":["FishingGroup"],"security":[{"jwt":[]}],"parameters":[{"name":"fishingGroupId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fishing group","required":true,"example":"635a62f5dc5d7968e6846914"}],"responses":{"204":{"description":"&lt;b&gt;No Content&lt;/b&gt;, with no content."},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameter 'fishingGroupId' is required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this fishing group."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"fishing group not found":{"value":{"message":"Fishing group with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/fishing-group/{fishingGroupId}/users":{"put":{"summary":"Add users to existing fishing group.","description":"Add users to existing **fishing group** with given unique identifier.","tags":["FishingGroup"],"security":[{"jwt":[]}],"parameters":[{"name":"fishingGroupId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of a fishing group","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Fishing group's new users.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"type":"string"},"description":"emails's of &lt;b&gt;new users&lt;/b&gt; of a fishing group","example":["test@mail.com"]}},"required":["users"]}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"fishingGroupId is required":{"value":{"message":"Path parameter 'fishingGroupId' is required."}},"at least one body parameter is required":{"value":{"message":"Body parameter 'users' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Fishing group with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/fishing-group/{fishingGroupId}/users-remove":{"put":{"summary":"Delete existing user of the fishing group.","description":"Delete existing **user** with a given unique identifier.","tags":["FishingGroup"],"security":[{"jwt":[]}],"parameters":[{"name":"fishingGroupId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fishing group","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Fishing group's users to remove.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"type":"string"},"description":"emails's of &lt;b&gt;users&lt;/b&gt; to remove from a fishing group","example":["test@mail.com"]}},"required":["users"]}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameters 'fishingGroupId' and 'userId' are required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this user from a fishing group."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"fishing group not found":{"value":{"message":"Fishing group with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/distance":{"get":{"summary":"Retrieve fishing trips within a given distance.","description":"Retrieve **fishing trips** within a given distance.","tags":["Trips"],"parameters":[{"name":"lng","in":"query","required":true,"description":"&lt;b&gt;longitude&lt;/b&gt; of the trip","schema":{"type":"number","minimum":-90,"maximum":90},"example":15.272580993},{"name":"lat","in":"query","required":true,"description":"&lt;b&gt;latitude&lt;/b&gt; of the trip","schema":{"type":"number","minimum":-180,"maximum":180},"example":46.2195704036},{"name":"distance","in":"query","schema":{"type":"number","minimum":0,"default":5},"description":"maximum &lt;b&gt;distance&lt;/b&gt; in kilometers"},{"name":"nResults","in":"query","schema":{"type":"integer","minimum":1,"default":10},"description":"maximum &lt;b&gt;number of results&lt;/b&gt;"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with list of trips.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Carp fishing on lake Bled","time":"2023-10-19T16:16:57.108Z","type":"Carp fishing","user":"test@test.com","description":"Catching big carp on a chilli october morning.","coordinates":[46.2195704036,15.272580993]}]}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Query parameters 'lng' and 'lat' are required"}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"No trips found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"geo near accepts just one argument when querying for a GeoJSON point. Extra field found: $maxDistance: 5000.0"}}}}}}},"/trips/address":{"get":{"summary":"Retrieve fishing trips within a given distance around an address.","description":"Retrieve **fishing trips** within a given distance around an address.","tags":["Trips"],"parameters":[{"name":"address","in":"query","schema":{"type":"string"},"description":"&lt;b&gt;address&lt;/b&gt;"},{"name":"distance","in":"query","schema":{"type":"number","minimum":0,"default":5},"description":"maximum &lt;b&gt;distance&lt;/b&gt; in kilometers"},{"name":"nResults","in":"query","schema":{"type":"integer","minimum":1,"default":10},"description":"maximum &lt;b&gt;number of results&lt;/b&gt;"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with list of trips.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Carp fishing on lake Bled","time":"2023-10-19T16:16:57.108Z","type":"Carp fishing","user":"test@test.com","description":"Catching big carp on a chilli october morning.","coordinates":[15.272580993,46.2195704036]}]}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Query parameter 'address' is required"}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"No trips found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"geo near accepts just one argument when querying for a GeoJSON point. Extra field found: $maxDistance: 5000.0"}}}}}}},"/trips":{"post":{"summary":"Add a new trip.","description":"Add a new **trip**.","tags":["Trips"],"security":[{"jwt":[]}],"requestBody":{"description":"New trip's data.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of trip","example":"Carp fishing on lake Bled"},"time":{"type":"string","description":"&lt;b&gt;time&lt;/&gt; of trip","example":"2023-10-19T16:16:57.108Z"},"type":{"type":"string","description":"&lt;b&gt;type&lt;/b&gt; of trip","example":"Carp fishing"},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of the trip","example":"Catching big carp on a chilli october morning."},"coordinates":{"type":"array","minItems":2,"maxItems":2,"items":{"type":"number"},"description":"&lt;b&gt;coordinates&lt;/b&gt; of the trip","example":[15.272580993,46.2195704036]}},"required":["name","time","type"]}}}},"responses":{"201":{"description":"&lt;b&gt;Created&lt;/b&gt;, with details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"name and type are required.":{"value":{"message":"Parameters 'name' and 'type' are required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"get":{"summary":"Retrieve all fishing trips.","description":"Retrieve all **fishing trips**.","tags":["Trips"],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with list of trips.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Carp fishing on lake Bled","time":"2023-10-19T16:16:57.108Z","type":"Carp fishing","user":"test@test.com","description":"Catching big carp on a chilli october morning.","coordinates":[15.272580993,46.2195704036]}]}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"No trips found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}":{"get":{"summary":"Retrieve details of a given trip.","description":"Retrieve **details** for a given trip.","tags":["Trips"],"parameters":[{"name":"tripId","in":"path","required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of a trip","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"example":"635a62f5dc5d7968e68464c1"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with trip details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Carp fishing on lake Bled","time":"2023-10-19T16:16:57.108Z","type":"Carp fishing","user":"test@test.com","description":"Catching big carp on a chilli october morning.","coordinates":[15.272580993,46.2195704036]}]}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Trip with id '735a62f5dc5d7968e68464c1' not found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Cast to ObjectId failed for value \"1\" (type string) at path \"_id\" for model \"Trip\""}}}}}},"put":{"summary":"Change existing trip.","description":"Change existing **trip** with given unique identifier.","tags":["Trips"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of a trip","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Trips's name, type, description and coordinates.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of a trip","example":"New trip name"},"time":{"type":"string","description":"&lt;b&gt;time&lt;/&gt; of trip","example":"2023-10-19T16:16:57.108Z"},"type":{"type":"string","description":"&lt;b&gt;type&lt;/b&gt; of a trip","example":"Sea fishing"},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of a trip","example":"Hanging out with a bunch of friends"},"coordinates":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2,"description":"&lt;b&gt;coordinates&lt;/b&gt; of a trip","example":[15.272580993,46.2195704036]}}}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated comment details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId is required":{"value":{"message":"Path parameter 'tripId' is required."}},"at least one body parameter is required":{"value":{"message":"At least on of body parameters is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"delete":{"summary":"Delete existing trip.","description":"Delete existing **trip** with a given unique identifier.","tags":["Trips"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of location","required":true,"example":"635a62f5dc5d7968e6846914"}],"responses":{"204":{"description":"&lt;b&gt;No Content&lt;/b&gt;, with no content."},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameter 'tripId' is required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}}}}</code></pre>
                                  </details>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Evidence</th>
                                <td>
                                  <pre><code>Internal Server Error</code></pre>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    Review the source code of this page.
                                    Implement custom error pages. Consider
                                    implementing a mechanism to provide a unique
                                    error reference/identifier to the client
                                    (browser) while logging the details on the
                                    server side and not exposing them to the
                                    user.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>

                  <li>
                    <h5>
                      <a href="#alert-type-2">Cross-Domain Misconfiguration</a>
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >POST
                              https://localhost:3000/api/trips/635a62f5dc5d7968e6846914/comments</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list">
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/Top10/A01_2021-Broken_Access_Control/"
                                          >OWASP_2021_A01</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-top-ten/2017/A5_2017-Broken_Access_Control.html"
                                          >OWASP_2017_A05</a
                                        ></span
                                      >
                                    </li>
                                  </ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    Web browser data loading may be possible,
                                    due to a Cross Origin Resource Sharing
                                    (CORS) misconfiguration on the web server
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Other info</th>
                                <td>
                                  <p>
                                    The CORS misconfiguration on the web server
                                    permits cross-domain read requests from
                                    arbitrary third party domains, using
                                    unauthenticated APIs on this domain. Web
                                    browser implementations do not permit
                                    arbitrary third parties to read the response
                                    from authenticated APIs, however. This
                                    reduces the risk somewhat. This
                                    misconfiguration could be used by an
                                    attacker to access data that is available in
                                    an unauthenticated manner, but which uses
                                    some other form of security, such as IP
                                    address white-listing.
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (369
                                      bytes)
                                    </summary>

                                    <pre><code>POST https://localhost:3000/api/trips/635a62f5dc5d7968e6846914/comments HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache
accept: application/json
content-type: application/x-www-form-urlencoded
content-length: 55

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (55 bytes)</summary>

                                    <pre><code>comment=Zaproxy+dolore+alias+impedit+expedita+quisquam.</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (343 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 401 Unauthorized
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Content-Length: 46
ETag: W/"2e-Jaa3pKG4FkaGZJa5UEXLG1LDFGk"
Date: Sun, 19 Nov 2023 10:12:34 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body" open="open">
                                    <summary>Response body (46 bytes)</summary>

                                    <pre><code>{"message":"No authorization token was found"}</code></pre>
                                  </details>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Evidence</th>
                                <td>
                                  <pre><code>Access-Control-Allow-Origin: *</code></pre>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    Ensure that sensitive data is not available
                                    in an unauthenticated manner (using IP
                                    address white-listing, for instance).
                                  </p>

                                  <p>
                                    Configure the "Access-Control-Allow-Origin"
                                    HTTP header to a more restrictive set of
                                    domains, or remove all CORS headers
                                    entirely, to allow the web browser to
                                    enforce the Same Origin Policy (SOP) in a
                                    more restrictive manner.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>

          <li id="alerts--risk-1-confidence-3">
            <h3>
              <span>Risk</span>=<span class="risk-level">Low</span>,
              <span>Confidence</span>=<span class="confidence-level">High</span>
              <span>(1)</span>
            </h3>
            <ol>
              <li class="alerts--site-li">
                <h4>
                  <span class="site">https://localhost:3000</span>
                  <span>(1)</span>
                </h4>
                <ol>
                  <li>
                    <h5>
                      <a href="#alert-type-4"
                        >Strict-Transport-Security Header Not Set</a
                      >
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >POST
                              https://localhost:3000/api/trips/635a62f5dc5d7968e6846914/comments</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list">
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/Top10/A05_2021-Security_Misconfiguration/"
                                          >OWASP_2021_A05</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-top-ten/2017/A6_2017-Security_Misconfiguration.html"
                                          >OWASP_2017_A06</a
                                        ></span
                                      >
                                    </li>
                                  </ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    HTTP Strict Transport Security (HSTS) is a
                                    web security policy mechanism whereby a web
                                    server declares that complying user agents
                                    (such as a web browser) are to interact with
                                    it using only secure HTTPS connections (i.e.
                                    HTTP layered over TLS/SSL). HSTS is an IETF
                                    standards track protocol and is specified in
                                    RFC 6797.
                                  </p>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (369
                                      bytes)
                                    </summary>

                                    <pre><code>POST https://localhost:3000/api/trips/635a62f5dc5d7968e6846914/comments HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache
accept: application/json
content-type: application/x-www-form-urlencoded
content-length: 55

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (55 bytes)</summary>

                                    <pre><code>comment=Zaproxy+dolore+alias+impedit+expedita+quisquam.</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (343 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 401 Unauthorized
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Content-Length: 46
ETag: W/"2e-Jaa3pKG4FkaGZJa5UEXLG1LDFGk"
Date: Sun, 19 Nov 2023 10:12:34 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body" open="open">
                                    <summary>Response body (46 bytes)</summary>

                                    <pre><code>{"message":"No authorization token was found"}</code></pre>
                                  </details>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    Ensure that your web server, application
                                    server, load balancer, etc. is configured to
                                    enforce Strict-Transport-Security.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>

          <li id="alerts--risk-1-confidence-2">
            <h3>
              <span>Risk</span>=<span class="risk-level">Low</span>,
              <span>Confidence</span>=<span class="confidence-level"
                >Medium</span
              >
              <span>(1)</span>
            </h3>
            <ol>
              <li class="alerts--site-li">
                <h4>
                  <span class="site">https://localhost:3000</span>
                  <span>(1)</span>
                </h4>
                <ol>
                  <li>
                    <h5>
                      <a href="#alert-type-3"
                        >Information Disclosure - Debug Error Messages</a
                      >
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >GET https://localhost:3000/api/swagger.json</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list">
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/Top10/A01_2021-Broken_Access_Control/"
                                          >OWASP_2021_A01</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-web-security-testing-guide/v42/4-Web_Application_Security_Testing/08-Testing_for_Error_Handling/01-Testing_For_Improper_Error_Handling"
                                          >WSTG-v42-ERRH-01</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-top-ten/2017/A3_2017-Sensitive_Data_Exposure.html"
                                          >OWASP_2017_A03</a
                                        ></span
                                      >
                                    </li>
                                  </ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    The response appeared to contain common
                                    error messages returned by platforms such as
                                    ASP.NET, and Web-servers such as IIS and
                                    Apache. You can configure the list of common
                                    debug messages.
                                  </p>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (276
                                      bytes)
                                    </summary>

                                    <pre><code>GET https://localhost:3000/api/swagger.json HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache
Accept: application/json,*/*

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (0 bytes)</summary>

                                    <pre><code></code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (338 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Content-Length: 45919
ETag: W/"b35f-oqzTyqeXNGYxdKzaYkE45VrTgDA"
Date: Sun, 19 Nov 2023 10:12:33 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body">
                                    <summary>
                                      Response body (45919 bytes)
                                    </summary>

                                    <pre><code>{"openapi":"3.0.3","info":{"title":"MyFishingDiary","version":"0.1.0"},"tags":[{"name":"Trips","description":"Fishing &lt;b&gt;trips&lt;/b&gt;"},{"name":"Comments","description":"&lt;b&gt;Comments&lt;/b&gt; of fishing trip"},{"name":"Fish","description":"&lt;b&gt;Fish&lt;/b&gt; caught on a fishing trip"},{"name":"FishingGroup","description":"&lt;b&gt;Fishing groups&lt;/b&gt;"},{"name":"Authentication","description":"&lt;b&gt;User management&lt;/b&gt; and authentication."}],"servers":[{"url":"https://localhost:3000/api","description":"Secure development server for testing"},{"url":"http://localhost:3000/api","description":"Development server for testing"},{"url":"https://my-fishing-diary.onrender.com/api","description":"Production server"}],"components":{"securitySchemes":{"jwt":{"type":"http","scheme":"bearer","in":"header","bearerFormat":"JWT"}},"schemas":{"ErrorMessage":{"type":"object","properties":{"message":{"type":"string","description":"Message describing the error."}},"required":["message"]},"FishingGroup":{"type":"object","description":"&lt;b&gt;Fishing group&lt;/b&gt;.","properties":{"_id":{"type":"string","description":"unique identifier"},"name":{"type":"string","description":"name of the Fishing group"},"creator":{"type":"string","description":"email of creator of the Fishing group"},"users":{"type":"array","items":{"type":"string"},"description":"emails of members of the Fishing group"},"description":{"type":"string","description":"description of the Fishing group"}},"required":["_id","name"]},"Comment":{"type":"object","description":"Comment about fishing trip.","properties":{"_id":{"type":"string","description":"&lt;b&gt;unique identifier&lt;/b&gt; of comment","example":"635a62f5dc5d7968e68464be"},"author":{"type":"string","description":"&lt;b&gt;name of the author&lt;/b&gt; of the comment","example":"test@test.com"},"comment":{"type":"string","description":"&lt;b&gt;comment&lt;/b&gt; about the location","example":"What bait did you use?"},"createdOn":{"type":"string","description":"&lt;b&gt;date&lt;/b&gt; of the comment &lt;b&gt;creation&lt;/b&gt;","format":"date-time","example":"2022-12-25T17:43:00.000Z"}},"required":["_id","author","comment","createdOn"]},"Fish":{"type":"object","description":"Fish caught on a fishing trip.","properties":{"_id":{"type":"string","description":"&lt;b&gt;unique identifier&lt;/b&gt; of fish","example":"635a62f5dc5d7968e68464be"},"species":{"type":"string","description":"&lt;b&gt;species&lt;/b&gt; of the fish","example":"Carp"},"weight":{"type":"number","description":"&lt;b&gt;weight&lt;/b&gt; of the fsh in kg","example":5.21},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of the fish","example":"She is a real beauty"}},"required":["_id","species"]},"Trip":{"type":"object","description":"Fishing &lt;b&gt;trip&lt;/b&gt;.","properties":{"_id":{"type":"string","description":"unique identifier"},"name":{"type":"string","description":"name of the trip"},"type":{"type":"string","description":"type of the fish"},"user":{"type":"string","description":"email of the fisherman"},"description":{"type":"string","description":"description of the trip"},"fish":{"type":"array","items":{"$ref":"#/components/schemas/Fish"}},"coordinates":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2,"description":"GPS coordinates of the trip"},"comments":{"type":"array","items":{"$ref":"#/components/schemas/Comment"}}},"required":["_id","name","type","user"]},"User":{"type":"object","description":"User of the application.","properties":{"email":{"type":"string","format":"email","description":"email of the user","example":"test@email.com"},"name":{"type":"string","description":"name and surname of the user","example":"Test User","writeOnly":true},"password":{"type":"string","description":"password of the user","example":"test"}},"required":["email","name","password"]},"Authentication":{"type":"object","description":"Authentication token of the user.","properties":{"token":{"type":"string","description":"JWT token","example":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI1NTZiZWRmNDhmOTUzOTViMTlhNjc1ODgiLCJlbWFpbCI6InNpbW9uQGZ1bGxzdGFja3RyYWluaW5nLmNvbSIsIm5hbWUiOiJTaW1vbiBIb2xtZXMiLCJleHAiOjE0MzUwNDA0MTgsImlhdCI6MTQzNDQzNTYxOH0.GD7UrfnLk295rwvIrCikbkAKctFFoRCHotLYZwZpdlE"}},"required":["token"]}}},"paths":{"/register":{"post":{"summary":"Register a new user","description":"&lt;b&gt;Register a new user&lt;/b&gt; with name, email and password.","tags":["Authentication"],"requestBody":{"description":"User object","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/User"}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with JWT token.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authentication"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"All fields required."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/login":{"post":{"summary":"Login a user","description":"&lt;b&gt;Login an existing user&lt;/b&gt; with email and password.","tags":["Authentication"],"requestBody":{"description":"User credentials","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email","description":"email of the user","example":"test@email.com"},"password":{"type":"string","description":"password of the user","example":"test"}},"required":["email","password"]}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with JWT token.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Authentication"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"All fields required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"incorrect username":{"value":{"message":"Incorrect username."}},"incorrect password":{"value":{"message":"Incorrect password."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}/comments":{"post":{"summary":"Add a new comment to a given trip.","description":"Add a new **comment** with comment's content to a trip with given unique identifier.","tags":["Comments"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Comment's content.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"comment":{"type":"string","description":"&lt;b&gt;content&lt;/b&gt; of comment","example":"What bait did you use?"}},"required":["comment"]}}}},"responses":{"201":{"description":"&lt;b&gt;Created&lt;/b&gt;, with comment details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId is required":{"value":{"message":"Path parameter 'tripId' is required."}},"author comment are required":{"value":{"message":"Body parameter 'comment' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Trip with id '735a62f5dc5d7968e68467e3' not found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}/comments/{commentId}":{"get":{"summary":"Retrieve a specific comment of a given trip.","description":"Retrieve details of a **comment** of a given trip.","tags":["Comments"],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","example":"635a62f5dc5d7968e6846574"},{"name":"commentId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of comment","example":"635a62f5dc5d7968e68464be"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with trip details.","content":{"application/json":{"schema":{"type":"object","properties":{"trip":{"type":"object","properties":{"_id":{"type":"string","description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","example":"635a62f5dc5d7968e6846574"},"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of the trip","example":"Carp fishing on lake Bled"}}},"comment":{"$ref":"#/components/schemas/Comment"}}}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '73512fc5022f6bd9e0dfe53e' not found."}},"comment not found":{"value":{"message":"Comment with id '1' not found."}},"no comments found":{"value":{"message":"No comments found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"put":{"summary":"Change existing comment of a given trip.","description":"Change existing **comment** with author's name and comment's content to a trip with given unique identifier.","tags":["Comments"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"},{"name":"commentId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of comment","required":true,"example":"636346e7171e084ff4e4bbf9"}],"requestBody":{"description":"Comment's author and content.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"comment":{"type":"string","description":"&lt;b&gt;content&lt;/b&gt; of comment","example":"What bait did you use?"}},"required":["comment"]}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated comment details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId and commentId are required":{"value":{"message":"Path parameters 'tripId' and 'commentId' are required."}},"comment is required":{"value":{"message":"Parameter 'comment' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this comment."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}},"comment not found":{"value":{"message":"Comment with id '736346e7171e084ff4e4bbf9' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"delete":{"summary":"Delete existing comment from a given trip.","description":"Delete existing **comment** with a given unique identifier from a trip with given unique identifier.","tags":["Comments"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"},{"name":"commentId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of comment","required":true,"example":"636346e7171e084ff4e4bbf9"}],"responses":{"204":{"description":"&lt;b&gt;No Content&lt;/b&gt;, with no content."},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameters 'tripId' and 'commentId' are required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this comment."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}},"comment not found":{"value":{"message":"Comment with id '736346e7171e084ff4e4bbf9' not found."}},"no comments found":{"value":{"message":"No comments found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}/fish":{"post":{"summary":"Add a new fish to a given trip.","description":"Add a new **fish** with species, weight and description to a trip with given unique identifier.","tags":["Fish"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Fish's species, weight and description.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"species":{"type":"string","description":"&lt;b&gt;species&lt;/b&gt; of fish","example":"Carp"},"weight":{"type":"number","description":"&lt;b&gt;weight&lt;/b&gt; of fish in kg","example":5.21},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of fish","example":"She is a real beauty"}},"required":["species"]}}}},"responses":{"201":{"description":"&lt;b&gt;Created&lt;/b&gt;, with fish details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Fish"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId is required":{"value":{"message":"Path parameter 'tripId' is required."}},"species is required":{"value":{"message":"Body parameter 'species' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to add fish to this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Trip with id '735a62f5dc5d7968e68467e3' not found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}/fish/{fishId}":{"get":{"summary":"Retrieve a specific fish of a given trip.","description":"Retrieve details of a **fish** of a given trip.","tags":["Fish"],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","example":"635a62f5dc5d7968e6846574"},{"name":"fishId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fish","example":"635a62f5dc5d7968e68464be"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with trip details.","content":{"application/json":{"schema":{"type":"object","properties":{"trip":{"type":"object","properties":{"_id":{"type":"string","description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","example":"635a62f5dc5d7968e6846574"},"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of the trip","example":"Carp fishing on lake Bled"}}},"fish":{"$ref":"#/components/schemas/Fish"}}}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '73512fc5022f6bd9e0dfe53e' not found."}},"fish not found":{"value":{"message":"Fish with id '1' not found."}},"no fish found":{"value":{"message":"No fish found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"put":{"summary":"Change existing fish to a given trip.","description":"Change existing **fish** with species, weight and description to a trip with given unique identifier.","tags":["Fish"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"},{"name":"fishId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fish","required":true,"example":"636346e7171e084ff4e4bbf9"}],"requestBody":{"description":"Fish's species, weight and description.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"species":{"type":"string","description":"&lt;b&gt;species&lt;/b&gt; of fish","example":"Carp"},"weight":{"type":"number","description":"&lt;b&gt;WEight&lt;/b&gt; of fish in kg","example":5.21},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of fish","example":"Very aggressive"}}}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated fish details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Fish"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId and fishId are required":{"value":{"message":"Path parameters 'tripId' and 'fishId' are required."}},"species, weight or description is required":{"value":{"message":"At least one of parameters 'species', 'weight' and 'description' are required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this fish."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}},"fish not found":{"value":{"message":"Fish with id '736346e7171e084ff4e4bbf9' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"delete":{"summary":"Delete existing fish from a given trip.","description":"Delete existing **fish** with a given unique identifier from a trip with given unique identifier.","tags":["Fish"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of trip","required":true,"example":"635a62f5dc5d7968e6846914"},{"name":"fishId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fish","required":true,"example":"636346e7171e084ff4e4bbf9"}],"responses":{"204":{"description":"&lt;b&gt;No Content&lt;/b&gt;, with no content."},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameters 'tripId' and 'fishId' are required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this fish."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}},"fish not found":{"value":{"message":"Fish with id '736346e7171e084ff4e4bbf9' not found."}},"no fish found":{"value":{"message":"No fish found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/fishing-group":{"get":{"summary":"Retrieve all fishing groups.","description":"Retrieve all **fishing groups**.","tags":["FishingGroup"],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with list of fishing groups.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Ljubljana group","creator":"John Doe"}]}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"No fishing groups found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"post":{"summary":"Add a new fishing group.","description":"Add a new **fishing group**.","tags":["FishingGroup"],"security":[{"jwt":[]}],"requestBody":{"description":"New fishing group's data.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of fishing group","example":"Ljubljana fishing club"},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of the fishing group","example":"We fish in Ljubljana!"}},"required":["name"]}}}},"responses":{"201":{"description":"&lt;b&gt;Created&lt;/b&gt;, with details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"name and type are required.":{"value":{"message":"Parameter 'name' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/fishing-group/{fishingGroupId}":{"put":{"summary":"Change existing fishing group.","description":"Change existing **fishing group** with given unique identifier.","tags":["FishingGroup"],"security":[{"jwt":[]}],"parameters":[{"name":"fishingGroupId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of a fishing group","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Fishing group's name and description.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of a fishing group","example":"New group name"},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of a fishing group","example":"Same group with a new description."}}}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"fishingGroupId is required":{"value":{"message":"Path parameter 'fishingGroupId' is required."}},"at least one body parameter is required":{"value":{"message":"At least on of body parameters is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Fishing group with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"delete":{"summary":"Delete existing fishing group.","description":"Delete existing **fishing group** with a given unique identifier.","tags":["FishingGroup"],"security":[{"jwt":[]}],"parameters":[{"name":"fishingGroupId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fishing group","required":true,"example":"635a62f5dc5d7968e6846914"}],"responses":{"204":{"description":"&lt;b&gt;No Content&lt;/b&gt;, with no content."},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameter 'fishingGroupId' is required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this fishing group."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"fishing group not found":{"value":{"message":"Fishing group with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/fishing-group/{fishingGroupId}/users":{"put":{"summary":"Add users to existing fishing group.","description":"Add users to existing **fishing group** with given unique identifier.","tags":["FishingGroup"],"security":[{"jwt":[]}],"parameters":[{"name":"fishingGroupId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of a fishing group","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Fishing group's new users.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"type":"string"},"description":"emails's of &lt;b&gt;new users&lt;/b&gt; of a fishing group","example":["test@mail.com"]}},"required":["users"]}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"fishingGroupId is required":{"value":{"message":"Path parameter 'fishingGroupId' is required."}},"at least one body parameter is required":{"value":{"message":"Body parameter 'users' is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Fishing group with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/fishing-group/{fishingGroupId}/users-remove":{"put":{"summary":"Delete existing user of the fishing group.","description":"Delete existing **user** with a given unique identifier.","tags":["FishingGroup"],"security":[{"jwt":[]}],"parameters":[{"name":"fishingGroupId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of fishing group","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Fishing group's users to remove.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"type":"string"},"description":"emails's of &lt;b&gt;users&lt;/b&gt; to remove from a fishing group","example":["test@mail.com"]}},"required":["users"]}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FishingGroup"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameters 'fishingGroupId' and 'userId' are required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this user from a fishing group."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"fishing group not found":{"value":{"message":"Fishing group with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/distance":{"get":{"summary":"Retrieve fishing trips within a given distance.","description":"Retrieve **fishing trips** within a given distance.","tags":["Trips"],"parameters":[{"name":"lng","in":"query","required":true,"description":"&lt;b&gt;longitude&lt;/b&gt; of the trip","schema":{"type":"number","minimum":-90,"maximum":90},"example":15.272580993},{"name":"lat","in":"query","required":true,"description":"&lt;b&gt;latitude&lt;/b&gt; of the trip","schema":{"type":"number","minimum":-180,"maximum":180},"example":46.2195704036},{"name":"distance","in":"query","schema":{"type":"number","minimum":0,"default":5},"description":"maximum &lt;b&gt;distance&lt;/b&gt; in kilometers"},{"name":"nResults","in":"query","schema":{"type":"integer","minimum":1,"default":10},"description":"maximum &lt;b&gt;number of results&lt;/b&gt;"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with list of trips.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Carp fishing on lake Bled","time":"2023-10-19T16:16:57.108Z","type":"Carp fishing","user":"test@test.com","description":"Catching big carp on a chilli october morning.","coordinates":[46.2195704036,15.272580993]}]}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Query parameters 'lng' and 'lat' are required"}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"No trips found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"geo near accepts just one argument when querying for a GeoJSON point. Extra field found: $maxDistance: 5000.0"}}}}}}},"/trips/address":{"get":{"summary":"Retrieve fishing trips within a given distance around an address.","description":"Retrieve **fishing trips** within a given distance around an address.","tags":["Trips"],"parameters":[{"name":"address","in":"query","schema":{"type":"string"},"description":"&lt;b&gt;address&lt;/b&gt;"},{"name":"distance","in":"query","schema":{"type":"number","minimum":0,"default":5},"description":"maximum &lt;b&gt;distance&lt;/b&gt; in kilometers"},{"name":"nResults","in":"query","schema":{"type":"integer","minimum":1,"default":10},"description":"maximum &lt;b&gt;number of results&lt;/b&gt;"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with list of trips.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Carp fishing on lake Bled","time":"2023-10-19T16:16:57.108Z","type":"Carp fishing","user":"test@test.com","description":"Catching big carp on a chilli october morning.","coordinates":[15.272580993,46.2195704036]}]}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Query parameter 'address' is required"}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"No trips found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"geo near accepts just one argument when querying for a GeoJSON point. Extra field found: $maxDistance: 5000.0"}}}}}}},"/trips":{"post":{"summary":"Add a new trip.","description":"Add a new **trip**.","tags":["Trips"],"security":[{"jwt":[]}],"requestBody":{"description":"New trip's data.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of trip","example":"Carp fishing on lake Bled"},"time":{"type":"string","description":"&lt;b&gt;time&lt;/&gt; of trip","example":"2023-10-19T16:16:57.108Z"},"type":{"type":"string","description":"&lt;b&gt;type&lt;/b&gt; of trip","example":"Carp fishing"},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of the trip","example":"Catching big carp on a chilli october morning."},"coordinates":{"type":"array","minItems":2,"maxItems":2,"items":{"type":"number"},"description":"&lt;b&gt;coordinates&lt;/b&gt; of the trip","example":[15.272580993,46.2195704036]}},"required":["name","time","type"]}}}},"responses":{"201":{"description":"&lt;b&gt;Created&lt;/b&gt;, with details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"name and type are required.":{"value":{"message":"Parameters 'name' and 'type' are required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"get":{"summary":"Retrieve all fishing trips.","description":"Retrieve all **fishing trips**.","tags":["Trips"],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with list of trips.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Carp fishing on lake Bled","time":"2023-10-19T16:16:57.108Z","type":"Carp fishing","user":"test@test.com","description":"Catching big carp on a chilli october morning.","coordinates":[15.272580993,46.2195704036]}]}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"No trips found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}},"/trips/{tripId}":{"get":{"summary":"Retrieve details of a given trip.","description":"Retrieve **details** for a given trip.","tags":["Trips"],"parameters":[{"name":"tripId","in":"path","required":true,"description":"&lt;b&gt;unique identifier&lt;/b&gt; of a trip","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"example":"635a62f5dc5d7968e68464c1"}],"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with trip details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"},"example":[{"_id":"635a62f5dc5d7968e68467e3","name":"Carp fishing on lake Bled","time":"2023-10-19T16:16:57.108Z","type":"Carp fishing","user":"test@test.com","description":"Catching big carp on a chilli october morning.","coordinates":[15.272580993,46.2195704036]}]}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Trip with id '735a62f5dc5d7968e68464c1' not found."}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Cast to ObjectId failed for value \"1\" (type string) at path \"_id\" for model \"Trip\""}}}}}},"put":{"summary":"Change existing trip.","description":"Change existing **trip** with given unique identifier.","tags":["Trips"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of a trip","required":true,"example":"635a62f5dc5d7968e6846914"}],"requestBody":{"description":"Trips's name, type, description and coordinates.","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"&lt;b&gt;name&lt;/b&gt; of a trip","example":"New trip name"},"time":{"type":"string","description":"&lt;b&gt;time&lt;/&gt; of trip","example":"2023-10-19T16:16:57.108Z"},"type":{"type":"string","description":"&lt;b&gt;type&lt;/b&gt; of a trip","example":"Sea fishing"},"description":{"type":"string","description":"&lt;b&gt;description&lt;/b&gt; of a trip","example":"Hanging out with a bunch of friends"},"coordinates":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2,"description":"&lt;b&gt;coordinates&lt;/b&gt; of a trip","example":[15.272580993,46.2195704036]}}}}}},"responses":{"200":{"description":"&lt;b&gt;OK&lt;/b&gt;, with updated comment details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trip"}}}},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"tripId is required":{"value":{"message":"Path parameter 'tripId' is required."}},"at least one body parameter is required":{"value":{"message":"At least on of body parameters is required."}}}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to update this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}},"delete":{"summary":"Delete existing trip.","description":"Delete existing **trip** with a given unique identifier.","tags":["Trips"],"security":[{"jwt":[]}],"parameters":[{"name":"tripId","in":"path","schema":{"type":"string","pattern":"^[a-fA-F\\d]{24}$"},"description":"&lt;b&gt;unique identifier&lt;/b&gt; of location","required":true,"example":"635a62f5dc5d7968e6846914"}],"responses":{"204":{"description":"&lt;b&gt;No Content&lt;/b&gt;, with no content."},"400":{"description":"&lt;b&gt;Bad Request&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Path parameter 'tripId' is required."}}}},"401":{"description":"&lt;b&gt;Unauthorized&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"no token provided":{"value":{"message":"No authorization token was found."}},"user not found":{"value":{"message":"User not found."}}}}}},"403":{"description":"&lt;b&gt;Forbidden&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Not authorized to delete this trip."}}}},"404":{"description":"&lt;b&gt;Not Found&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"examples":{"trip not found":{"value":{"message":"Trip with id '735a62f5dc5d7968e6846914' not found."}}}}}},"500":{"description":"&lt;b&gt;Internal Server Error&lt;/b&gt;, with error message.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorMessage"},"example":{"message":"Database not available."}}}}}}}}}</code></pre>
                                  </details>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Evidence</th>
                                <td>
                                  <pre><code>Internal Server Error</code></pre>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    Disable debugging messages before pushing to
                                    production.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>

          <li id="alerts--risk-0-confidence-3">
            <h3>
              <span>Risk</span>=<span class="risk-level">Informational</span>,
              <span>Confidence</span>=<span class="confidence-level">High</span>
              <span>(1)</span>
            </h3>
            <ol>
              <li class="alerts--site-li">
                <h4>
                  <span class="site">https://localhost:3000</span>
                  <span>(1)</span>
                </h4>
                <ol>
                  <li>
                    <h5>
                      <a href="#alert-type-5"
                        >Authentication Request Identified</a
                      >
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >POST https://localhost:3000/api/login</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list"></ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    The given request has been identified as an
                                    authentication request. The 'Other Info'
                                    field contains a set of key=value lines
                                    which identify any relevant fields. If the
                                    request is in a context which has an
                                    Authentication Method set to "Auto-Detect"
                                    then this rule will change the
                                    authentication to match the request
                                    identified.
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Other info</th>
                                <td>
                                  <p>userParam=email</p>

                                  <p>userValue=zaproxy@example.com</p>

                                  <p>passwordParam=password</p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (335
                                      bytes)
                                    </summary>

                                    <pre><code>POST https://localhost:3000/api/login HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache
accept: application/json
content-type: application/x-www-form-urlencoded
content-length: 40

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (40 bytes)</summary>

                                    <pre><code>email=zaproxy%40example.com&amp;password=ZAP</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (335 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Content-Length: 284
ETag: W/"11c-X/nXFreCwTjdfE9gONHbudyiqCI"
Date: Sun, 19 Nov 2023 10:12:33 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body" open="open">
                                    <summary>Response body (284 bytes)</summary>

                                    <pre><code>{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NTU5ZGUyZDllZjUzZDkyNDNhZWM1ZTEiLCJlbWFpbCI6InphcHJveHlAZXhhbXBsZS5jb20iLCJuYW1lIjoiWkFQIiwicm9sZSI6InVzZXIiLCJmaXNoaW5nR3JvdXAiOltdLCJleHAiOjE3MDA5OTM1NTMsImlhdCI6MTcwMDM4ODc1M30.neGIkEo_R4Tbg1hhBMv8g-Nd5TkPGPj5fAFa7PtFO_Y"}</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Parameter</th>
                                <td>
                                  <pre><code>email</code></pre>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Evidence</th>
                                <td>
                                  <pre><code>password</code></pre>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    This is an informational alert rather than a
                                    vulnerability and so there is nothing to
                                    fix.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>

          <li id="alerts--risk-0-confidence-2">
            <h3>
              <span>Risk</span>=<span class="risk-level">Informational</span>,
              <span>Confidence</span>=<span class="confidence-level"
                >Medium</span
              >
              <span>(3)</span>
            </h3>
            <ol>
              <li class="alerts--site-li">
                <h4>
                  <span class="site">https://localhost:3000</span>
                  <span>(3)</span>
                </h4>
                <ol>
                  <li>
                    <h5>
                      <a href="#alert-type-7">Modern Web Application</a>
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >GET https://localhost:3000/trips</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list"></ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    The application appears to be a modern web
                                    application. If you need to explore it
                                    automatically then the Ajax Spider may well
                                    be more effective than the standard one.
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Other info</th>
                                <td>
                                  <p>
                                    No links have been found while there are
                                    scripts, which is an indication that this is
                                    a modern web application.
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (235
                                      bytes)
                                    </summary>

                                    <pre><code>GET https://localhost:3000/trips HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (0 bytes)</summary>

                                    <pre><code></code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (414 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Accept-Ranges: bytes
Cache-Control: public, max-age=0
Last-Modified: Sun, 19 Nov 2023 09:20:50 GMT
ETag: W/"31d-18be6e1f7cf"
Content-Type: text/html; charset=UTF-8
Content-Length: 797
Date: Sun, 19 Nov 2023 10:13:21 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body" open="open">
                                    <summary>Response body (797 bytes)</summary>

                                    <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"/&gt;
    &lt;title&gt;MyFishingDiary&lt;/title&gt;
    &lt;base href="/"/&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1"/&gt;
    &lt;link rel="icon" type="image/x-icon" href="favicon.ico"/&gt;
    &lt;link rel="manifest" href="manifest.webmanifest"&gt;
  &lt;meta name="theme-color" content="#1976d2"&gt;
&lt;link rel="stylesheet" href="styles.css"&gt;&lt;/head&gt;
  &lt;body class="dx-viewport"&gt;
    &lt;app-root&gt;&lt;/app-root&gt;
    &lt;noscript&gt;Please enable JavaScript to continue using this application.&lt;/noscript&gt;
&lt;script src="runtime.js" type="module"&gt;&lt;/script&gt;&lt;script src="polyfills.js" type="module"&gt;&lt;/script&gt;&lt;script src="scripts.js" defer&gt;&lt;/script&gt;&lt;script src="vendor.js" type="module"&gt;&lt;/script&gt;&lt;script src="main.js" type="module"&gt;&lt;/script&gt;&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                                  </details>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Evidence</th>
                                <td>
                                  <pre><code>&lt;script src="runtime.js" type="module"&gt;&lt;/script&gt;</code></pre>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    This is an informational alert and so no
                                    changes are required.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>

                  <li>
                    <h5>
                      <a href="#alert-type-9"
                        >Session Management Response Identified</a
                      >
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >POST https://localhost:3000/api/register</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list"></ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    The given response has been identified as
                                    containing a session management token. The
                                    'Other Info' field contains a set of header
                                    tokens that can be used in the Header Based
                                    Session Management Method. If the request is
                                    in a context which has a Session Management
                                    Method set to "Auto-Detect" then this rule
                                    will change the session management to use
                                    the tokens identified.
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Other info</th>
                                <td>
                                  <p>json:token</p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (338
                                      bytes)
                                    </summary>

                                    <pre><code>POST https://localhost:3000/api/register HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache
accept: application/json
content-type: application/x-www-form-urlencoded
content-length: 49

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (49 bytes)</summary>

                                    <pre><code>email=zaproxy%40example.com&amp;name=ZAP&amp;password=ZAP</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (335 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Content-Length: 284
ETag: W/"11c-VA+CMe93G6zLMWQGEiSn0iIaaQw"
Date: Sun, 19 Nov 2023 10:12:33 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body" open="open">
                                    <summary>Response body (284 bytes)</summary>

                                    <pre><code>{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NTU5ZGY5MTg3M2ZlNjk3MjljYWVjMTUiLCJlbWFpbCI6InphcHJveHlAZXhhbXBsZS5jb20iLCJuYW1lIjoiWkFQIiwicm9sZSI6InVzZXIiLCJmaXNoaW5nR3JvdXAiOltdLCJleHAiOjE3MDA5OTM1NTMsImlhdCI6MTcwMDM4ODc1M30.UdUGHO7rAocHeAhfuK_XpNoaNlfinMko2Gi11v7mXO0"}</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Parameter</th>
                                <td>
                                  <pre><code>token</code></pre>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Evidence</th>
                                <td>
                                  <pre><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NTU5ZGY5MTg3M2ZlNjk3MjljYWVjMTUiLCJlbWFpbCI6InphcHJveHlAZXhhbXBsZS5jb20iLCJuYW1lIjoiWkFQIiwicm9sZSI6InVzZXIiLCJmaXNoaW5nR3JvdXAiOltdLCJleHAiOjE3MDA5OTM1NTMsImlhdCI6MTcwMDM4ODc1M30.UdUGHO7rAocHeAhfuK_XpNoaNlfinMko2Gi11v7mXO0</code></pre>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    This is an informational alert rather than a
                                    vulnerability and so there is nothing to
                                    fix.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>

                  <li>
                    <h5>
                      <a href="#alert-type-10">User Agent Fuzzer</a>
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >POST https://localhost:3000/api/login</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list"></ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    Check for differences in response based on
                                    fuzzed User Agent (eg. mobile sites, access
                                    as a Search Engine Crawler). Compares the
                                    response statuscode and the hashcode of the
                                    response body with the original response.
                                  </p>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (274
                                      bytes)
                                    </summary>

                                    <pre><code>POST https://localhost:3000/api/login HTTP/1.1
host: localhost:3000
user-agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)
pragma: no-cache
cache-control: no-cache
accept: application/json
content-type: application/x-www-form-urlencoded
content-length: 40

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (40 bytes)</summary>

                                    <pre><code>email=zaproxy%40example.com&amp;password=ZAP</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (335 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Content-Length: 284
ETag: W/"11c-zxtcUCE88DhZybhJpow58w6Izh0"
Date: Sun, 19 Nov 2023 10:18:33 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body" open="open">
                                    <summary>Response body (284 bytes)</summary>

                                    <pre><code>{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NTU5ZGUyZDllZjUzZDkyNDNhZWM1ZTEiLCJlbWFpbCI6InphcHJveHlAZXhhbXBsZS5jb20iLCJuYW1lIjoiWkFQIiwicm9sZSI6InVzZXIiLCJmaXNoaW5nR3JvdXAiOltdLCJleHAiOjE3MDA5OTM5MTMsImlhdCI6MTcwMDM4OTExM30.uykHlpZDvOJf7xO5I-kiTRjwxnmSG_Z-aEwA4YxxB7Q"}</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Parameter</th>
                                <td>
                                  <pre><code>Header User-Agent</code></pre>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Attack</th>
                                <td>
                                  <pre><code>Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)</code></pre>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>

          <li id="alerts--risk-0-confidence-1">
            <h3>
              <span>Risk</span>=<span class="risk-level">Informational</span>,
              <span>Confidence</span>=<span class="confidence-level">Low</span>
              <span>(2)</span>
            </h3>
            <ol>
              <li class="alerts--site-li">
                <h4>
                  <span class="site">https://localhost:3000</span>
                  <span>(2)</span>
                </h4>
                <ol>
                  <li>
                    <h5>
                      <a href="#alert-type-6"
                        >Information Disclosure - Suspicious Comments</a
                      >
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >GET https://localhost:3000/polyfills.js</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list">
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/Top10/A01_2021-Broken_Access_Control/"
                                          >OWASP_2021_A01</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-web-security-testing-guide/v42/4-Web_Application_Security_Testing/01-Information_Gathering/05-Review_Webpage_Content_for_Information_Leakage"
                                          >WSTG-v42-INFO-05</a
                                        ></span
                                      >
                                    </li>
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-top-ten/2017/A3_2017-Sensitive_Data_Exposure.html"
                                          >OWASP_2017_A03</a
                                        ></span
                                      >
                                    </li>
                                  </ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    The response appears to contain suspicious
                                    comments which may help an attacker. Note:
                                    Matches made within script blocks or files
                                    are against the entire content not only
                                    comments.
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Other info</th>
                                <td>
                                  <p>
                                    The following pattern was used: \bBUGS\b and
                                    was detected in the element starting with: "
                                    //
                                    https://bugs.webkit.org/show_bug.cgi?id=44721",
                                    see evidence field for the suspicious
                                    comment/snippet.
                                  </p>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (275
                                      bytes)
                                    </summary>

                                    <pre><code>GET https://localhost:3000/polyfills.js HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache
referer: https://localhost:3000

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (0 bytes)</summary>

                                    <pre><code></code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (432 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Accept-Ranges: bytes
Cache-Control: public, max-age=0
Last-Modified: Sun, 19 Nov 2023 09:20:46 GMT
ETag: W/"1a0ae-18be6e1e888"
Content-Type: application/javascript; charset=UTF-8
Content-Length: 106670
Date: Sun, 19 Nov 2023 10:17:07 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body">
                                    <summary>
                                      Response body (106670 bytes)
                                    </summary>

                                    <pre><code>"use strict";
(self["webpackChunkmyFishingDiary"] = self["webpackChunkmyFishingDiary"] || []).push([["polyfills"],{

/***/ 76657:
/*!***********************************************!*\
  !*** ./node_modules/zone.js/fesm2015/zone.js ***!
  \***********************************************/
/***/ (() =&gt; {



/**
 * @license Angular v&lt;unknown&gt;
 * (c) 2010-2022 Google LLC. https://angular.io/
 * License: MIT
 */
(function (global) {
  const performance = global['performance'];
  function mark(name) {
    performance &amp;&amp; performance['mark'] &amp;&amp; performance['mark'](name);
  }
  function performanceMeasure(name, label) {
    performance &amp;&amp; performance['measure'] &amp;&amp; performance['measure'](name, label);
  }
  mark('Zone');
  // Initialize before it's accessed below.
  // __Zone_symbol_prefix global can be used to override the default zone
  // symbol prefix with a custom one if needed.
  const symbolPrefix = global['__Zone_symbol_prefix'] || '__zone_symbol__';
  function __symbol__(name) {
    return symbolPrefix + name;
  }
  const checkDuplicate = global[__symbol__('forceDuplicateZoneCheck')] === true;
  if (global['Zone']) {
    // if global['Zone'] already exists (maybe zone.js was already loaded or
    // some other lib also registered a global object named Zone), we may need
    // to throw an error, but sometimes user may not want this error.
    // For example,
    // we have two web pages, page1 includes zone.js, page2 doesn't.
    // and the 1st time user load page1 and page2, everything work fine,
    // but when user load page2 again, error occurs because global['Zone'] already exists.
    // so we add a flag to let user choose whether to throw this error or not.
    // By default, if existing Zone is from zone.js, we will not throw the error.
    if (checkDuplicate || typeof global['Zone'].__symbol__ !== 'function') {
      throw new Error('Zone already loaded.');
    } else {
      return global['Zone'];
    }
  }
  class Zone {
    // tslint:disable-next-line:require-internal-with-underscore
    static #_ = this.__symbol__ = __symbol__;
    static assertZonePatched() {
      if (global['Promise'] !== patches['ZoneAwarePromise']) {
        throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' + 'has been overwritten.\n' + 'Most likely cause is that a Promise polyfill has been loaded ' + 'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' + 'If you must load one, do so before loading zone.js.)');
      }
    }
    static get root() {
      let zone = Zone.current;
      while (zone.parent) {
        zone = zone.parent;
      }
      return zone;
    }
    static get current() {
      return _currentZoneFrame.zone;
    }
    static get currentTask() {
      return _currentTask;
    }
    // tslint:disable-next-line:require-internal-with-underscore
    static __load_patch(name, fn, ignoreDuplicate = false) {
      if (patches.hasOwnProperty(name)) {
        // `checkDuplicate` option is defined from global variable
        // so it works for all modules.
        // `ignoreDuplicate` can work for the specified module
        if (!ignoreDuplicate &amp;&amp; checkDuplicate) {
          throw Error('Already loaded patch: ' + name);
        }
      } else if (!global['__Zone_disable_' + name]) {
        const perfName = 'Zone:' + name;
        mark(perfName);
        patches[name] = fn(global, Zone, _api);
        performanceMeasure(perfName, perfName);
      }
    }
    get parent() {
      return this._parent;
    }
    get name() {
      return this._name;
    }
    constructor(parent, zoneSpec) {
      this._parent = parent;
      this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '&lt;root&gt;';
      this._properties = zoneSpec &amp;&amp; zoneSpec.properties || {};
      this._zoneDelegate = new _ZoneDelegate(this, this._parent &amp;&amp; this._parent._zoneDelegate, zoneSpec);
    }
    get(key) {
      const zone = this.getZoneWith(key);
      if (zone) return zone._properties[key];
    }
    getZoneWith(key) {
      let current = this;
      while (current) {
        if (current._properties.hasOwnProperty(key)) {
          return current;
        }
        current = current._parent;
      }
      return null;
    }
    fork(zoneSpec) {
      if (!zoneSpec) throw new Error('ZoneSpec required!');
      return this._zoneDelegate.fork(this, zoneSpec);
    }
    wrap(callback, source) {
      if (typeof callback !== 'function') {
        throw new Error('Expecting function got: ' + callback);
      }
      const _callback = this._zoneDelegate.intercept(this, callback, source);
      const zone = this;
      return function () {
        return zone.runGuarded(_callback, this, arguments, source);
      };
    }
    run(callback, applyThis, applyArgs, source) {
      _currentZoneFrame = {
        parent: _currentZoneFrame,
        zone: this
      };
      try {
        return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
      } finally {
        _currentZoneFrame = _currentZoneFrame.parent;
      }
    }
    runGuarded(callback, applyThis = null, applyArgs, source) {
      _currentZoneFrame = {
        parent: _currentZoneFrame,
        zone: this
      };
      try {
        try {
          return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
        } catch (error) {
          if (this._zoneDelegate.handleError(this, error)) {
            throw error;
          }
        }
      } finally {
        _currentZoneFrame = _currentZoneFrame.parent;
      }
    }
    runTask(task, applyThis, applyArgs) {
      if (task.zone != this) {
        throw new Error('A task can only be run in the zone of creation! (Creation: ' + (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');
      }
      // https://github.com/angular/zone.js/issues/778, sometimes eventTask
      // will run in notScheduled(canceled) state, we should not try to
      // run such kind of task but just return
      if (task.state === notScheduled &amp;&amp; (task.type === eventTask || task.type === macroTask)) {
        return;
      }
      const reEntryGuard = task.state != running;
      reEntryGuard &amp;&amp; task._transitionTo(running, scheduled);
      task.runCount++;
      const previousTask = _currentTask;
      _currentTask = task;
      _currentZoneFrame = {
        parent: _currentZoneFrame,
        zone: this
      };
      try {
        if (task.type == macroTask &amp;&amp; task.data &amp;&amp; !task.data.isPeriodic) {
          task.cancelFn = undefined;
        }
        try {
          return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);
        } catch (error) {
          if (this._zoneDelegate.handleError(this, error)) {
            throw error;
          }
        }
      } finally {
        // if the task's state is notScheduled or unknown, then it has already been cancelled
        // we should not reset the state to scheduled
        if (task.state !== notScheduled &amp;&amp; task.state !== unknown) {
          if (task.type == eventTask || task.data &amp;&amp; task.data.isPeriodic) {
            reEntryGuard &amp;&amp; task._transitionTo(scheduled, running);
          } else {
            task.runCount = 0;
            this._updateTaskCount(task, -1);
            reEntryGuard &amp;&amp; task._transitionTo(notScheduled, running, notScheduled);
          }
        }
        _currentZoneFrame = _currentZoneFrame.parent;
        _currentTask = previousTask;
      }
    }
    scheduleTask(task) {
      if (task.zone &amp;&amp; task.zone !== this) {
        // check if the task was rescheduled, the newZone
        // should not be the children of the original zone
        let newZone = this;
        while (newZone) {
          if (newZone === task.zone) {
            throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${task.zone.name}`);
          }
          newZone = newZone.parent;
        }
      }
      task._transitionTo(scheduling, notScheduled);
      const zoneDelegates = [];
      task._zoneDelegates = zoneDelegates;
      task._zone = this;
      try {
        task = this._zoneDelegate.scheduleTask(this, task);
      } catch (err) {
        // should set task's state to unknown when scheduleTask throw error
        // because the err may from reschedule, so the fromState maybe notScheduled
        task._transitionTo(unknown, scheduling, notScheduled);
        // TODO: @JiaLiPassion, should we check the result from handleError?
        this._zoneDelegate.handleError(this, err);
        throw err;
      }
      if (task._zoneDelegates === zoneDelegates) {
        // we have to check because internally the delegate can reschedule the task.
        this._updateTaskCount(task, 1);
      }
      if (task.state == scheduling) {
        task._transitionTo(scheduled, scheduling);
      }
      return task;
    }
    scheduleMicroTask(source, callback, data, customSchedule) {
      return this.scheduleTask(new ZoneTask(microTask, source, callback, data, customSchedule, undefined));
    }
    scheduleMacroTask(source, callback, data, customSchedule, customCancel) {
      return this.scheduleTask(new ZoneTask(macroTask, source, callback, data, customSchedule, customCancel));
    }
    scheduleEventTask(source, callback, data, customSchedule, customCancel) {
      return this.scheduleTask(new ZoneTask(eventTask, source, callback, data, customSchedule, customCancel));
    }
    cancelTask(task) {
      if (task.zone != this) throw new Error('A task can only be cancelled in the zone of creation! (Creation: ' + (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');
      if (task.state !== scheduled &amp;&amp; task.state !== running) {
        return;
      }
      task._transitionTo(canceling, scheduled, running);
      try {
        this._zoneDelegate.cancelTask(this, task);
      } catch (err) {
        // if error occurs when cancelTask, transit the state to unknown
        task._transitionTo(unknown, canceling);
        this._zoneDelegate.handleError(this, err);
        throw err;
      }
      this._updateTaskCount(task, -1);
      task._transitionTo(notScheduled, canceling);
      task.runCount = 0;
      return task;
    }
    _updateTaskCount(task, count) {
      const zoneDelegates = task._zoneDelegates;
      if (count == -1) {
        task._zoneDelegates = null;
      }
      for (let i = 0; i &lt; zoneDelegates.length; i++) {
        zoneDelegates[i]._updateTaskCount(task.type, count);
      }
    }
  }
  const DELEGATE_ZS = {
    name: '',
    onHasTask: (delegate, _, target, hasTaskState) =&gt; delegate.hasTask(target, hasTaskState),
    onScheduleTask: (delegate, _, target, task) =&gt; delegate.scheduleTask(target, task),
    onInvokeTask: (delegate, _, target, task, applyThis, applyArgs) =&gt; delegate.invokeTask(target, task, applyThis, applyArgs),
    onCancelTask: (delegate, _, target, task) =&gt; delegate.cancelTask(target, task)
  };
  class _ZoneDelegate {
    constructor(zone, parentDelegate, zoneSpec) {
      this._taskCounts = {
        'microTask': 0,
        'macroTask': 0,
        'eventTask': 0
      };
      this.zone = zone;
      this._parentDelegate = parentDelegate;
      this._forkZS = zoneSpec &amp;&amp; (zoneSpec &amp;&amp; zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);
      this._forkDlgt = zoneSpec &amp;&amp; (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);
      this._forkCurrZone = zoneSpec &amp;&amp; (zoneSpec.onFork ? this.zone : parentDelegate._forkCurrZone);
      this._interceptZS = zoneSpec &amp;&amp; (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);
      this._interceptDlgt = zoneSpec &amp;&amp; (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);
      this._interceptCurrZone = zoneSpec &amp;&amp; (zoneSpec.onIntercept ? this.zone : parentDelegate._interceptCurrZone);
      this._invokeZS = zoneSpec &amp;&amp; (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);
      this._invokeDlgt = zoneSpec &amp;&amp; (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);
      this._invokeCurrZone = zoneSpec &amp;&amp; (zoneSpec.onInvoke ? this.zone : parentDelegate._invokeCurrZone);
      this._handleErrorZS = zoneSpec &amp;&amp; (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);
      this._handleErrorDlgt = zoneSpec &amp;&amp; (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);
      this._handleErrorCurrZone = zoneSpec &amp;&amp; (zoneSpec.onHandleError ? this.zone : parentDelegate._handleErrorCurrZone);
      this._scheduleTaskZS = zoneSpec &amp;&amp; (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);
      this._scheduleTaskDlgt = zoneSpec &amp;&amp; (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);
      this._scheduleTaskCurrZone = zoneSpec &amp;&amp; (zoneSpec.onScheduleTask ? this.zone : parentDelegate._scheduleTaskCurrZone);
      this._invokeTaskZS = zoneSpec &amp;&amp; (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);
      this._invokeTaskDlgt = zoneSpec &amp;&amp; (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);
      this._invokeTaskCurrZone = zoneSpec &amp;&amp; (zoneSpec.onInvokeTask ? this.zone : parentDelegate._invokeTaskCurrZone);
      this._cancelTaskZS = zoneSpec &amp;&amp; (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);
      this._cancelTaskDlgt = zoneSpec &amp;&amp; (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);
      this._cancelTaskCurrZone = zoneSpec &amp;&amp; (zoneSpec.onCancelTask ? this.zone : parentDelegate._cancelTaskCurrZone);
      this._hasTaskZS = null;
      this._hasTaskDlgt = null;
      this._hasTaskDlgtOwner = null;
      this._hasTaskCurrZone = null;
      const zoneSpecHasTask = zoneSpec &amp;&amp; zoneSpec.onHasTask;
      const parentHasTask = parentDelegate &amp;&amp; parentDelegate._hasTaskZS;
      if (zoneSpecHasTask || parentHasTask) {
        // If we need to report hasTask, than this ZS needs to do ref counting on tasks. In such
        // a case all task related interceptors must go through this ZD. We can't short circuit it.
        this._hasTaskZS = zoneSpecHasTask ? zoneSpec : DELEGATE_ZS;
        this._hasTaskDlgt = parentDelegate;
        this._hasTaskDlgtOwner = this;
        this._hasTaskCurrZone = zone;
        if (!zoneSpec.onScheduleTask) {
          this._scheduleTaskZS = DELEGATE_ZS;
          this._scheduleTaskDlgt = parentDelegate;
          this._scheduleTaskCurrZone = this.zone;
        }
        if (!zoneSpec.onInvokeTask) {
          this._invokeTaskZS = DELEGATE_ZS;
          this._invokeTaskDlgt = parentDelegate;
          this._invokeTaskCurrZone = this.zone;
        }
        if (!zoneSpec.onCancelTask) {
          this._cancelTaskZS = DELEGATE_ZS;
          this._cancelTaskDlgt = parentDelegate;
          this._cancelTaskCurrZone = this.zone;
        }
      }
    }
    fork(targetZone, zoneSpec) {
      return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) : new Zone(targetZone, zoneSpec);
    }
    intercept(targetZone, callback, source) {
      return this._interceptZS ? this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) : callback;
    }
    invoke(targetZone, callback, applyThis, applyArgs, source) {
      return this._invokeZS ? this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) : callback.apply(applyThis, applyArgs);
    }
    handleError(targetZone, error) {
      return this._handleErrorZS ? this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) : true;
    }
    scheduleTask(targetZone, task) {
      let returnTask = task;
      if (this._scheduleTaskZS) {
        if (this._hasTaskZS) {
          returnTask._zoneDelegates.push(this._hasTaskDlgtOwner);
        }
        // clang-format off
        returnTask = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);
        // clang-format on
        if (!returnTask) returnTask = task;
      } else {
        if (task.scheduleFn) {
          task.scheduleFn(task);
        } else if (task.type == microTask) {
          scheduleMicroTask(task);
        } else {
          throw new Error('Task is missing scheduleFn.');
        }
      }
      return returnTask;
    }
    invokeTask(targetZone, task, applyThis, applyArgs) {
      return this._invokeTaskZS ? this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) : task.callback.apply(applyThis, applyArgs);
    }
    cancelTask(targetZone, task) {
      let value;
      if (this._cancelTaskZS) {
        value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);
      } else {
        if (!task.cancelFn) {
          throw Error('Task is not cancelable');
        }
        value = task.cancelFn(task);
      }
      return value;
    }
    hasTask(targetZone, isEmpty) {
      // hasTask should not throw error so other ZoneDelegate
      // can still trigger hasTask callback
      try {
        this._hasTaskZS &amp;&amp; this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);
      } catch (err) {
        this.handleError(targetZone, err);
      }
    }
    // tslint:disable-next-line:require-internal-with-underscore
    _updateTaskCount(type, count) {
      const counts = this._taskCounts;
      const prev = counts[type];
      const next = counts[type] = prev + count;
      if (next &lt; 0) {
        throw new Error('More tasks executed then were scheduled.');
      }
      if (prev == 0 || next == 0) {
        const isEmpty = {
          microTask: counts['microTask'] &gt; 0,
          macroTask: counts['macroTask'] &gt; 0,
          eventTask: counts['eventTask'] &gt; 0,
          change: type
        };
        this.hasTask(this.zone, isEmpty);
      }
    }
  }
  class ZoneTask {
    constructor(type, source, callback, options, scheduleFn, cancelFn) {
      // tslint:disable-next-line:require-internal-with-underscore
      this._zone = null;
      this.runCount = 0;
      // tslint:disable-next-line:require-internal-with-underscore
      this._zoneDelegates = null;
      // tslint:disable-next-line:require-internal-with-underscore
      this._state = 'notScheduled';
      this.type = type;
      this.source = source;
      this.data = options;
      this.scheduleFn = scheduleFn;
      this.cancelFn = cancelFn;
      if (!callback) {
        throw new Error('callback is not defined');
      }
      this.callback = callback;
      const self = this;
      // TODO: @JiaLiPassion options should have interface
      if (type === eventTask &amp;&amp; options &amp;&amp; options.useG) {
        this.invoke = ZoneTask.invokeTask;
      } else {
        this.invoke = function () {
          return ZoneTask.invokeTask.call(global, self, this, arguments);
        };
      }
    }
    static invokeTask(task, target, args) {
      if (!task) {
        task = this;
      }
      _numberOfNestedTaskFrames++;
      try {
        task.runCount++;
        return task.zone.runTask(task, target, args);
      } finally {
        if (_numberOfNestedTaskFrames == 1) {
          drainMicroTaskQueue();
        }
        _numberOfNestedTaskFrames--;
      }
    }
    get zone() {
      return this._zone;
    }
    get state() {
      return this._state;
    }
    cancelScheduleRequest() {
      this._transitionTo(notScheduled, scheduling);
    }
    // tslint:disable-next-line:require-internal-with-underscore
    _transitionTo(toState, fromState1, fromState2) {
      if (this._state === fromState1 || this._state === fromState2) {
        this._state = toState;
        if (toState == notScheduled) {
          this._zoneDelegates = null;
        }
      } else {
        throw new Error(`${this.type} '${this.source}': can not transition to '${toState}', expecting state '${fromState1}'${fromState2 ? ' or \'' + fromState2 + '\'' : ''}, was '${this._state}'.`);
      }
    }
    toString() {
      if (this.data &amp;&amp; typeof this.data.handleId !== 'undefined') {
        return this.data.handleId.toString();
      } else {
        return Object.prototype.toString.call(this);
      }
    }
    // add toJSON method to prevent cyclic error when
    // call JSON.stringify(zoneTask)
    toJSON() {
      return {
        type: this.type,
        state: this.state,
        source: this.source,
        zone: this.zone.name,
        runCount: this.runCount
      };
    }
  }
  //////////////////////////////////////////////////////
  //////////////////////////////////////////////////////
  ///  MICROTASK QUEUE
  //////////////////////////////////////////////////////
  //////////////////////////////////////////////////////
  const symbolSetTimeout = __symbol__('setTimeout');
  const symbolPromise = __symbol__('Promise');
  const symbolThen = __symbol__('then');
  let _microTaskQueue = [];
  let _isDrainingMicrotaskQueue = false;
  let nativeMicroTaskQueuePromise;
  function nativeScheduleMicroTask(func) {
    if (!nativeMicroTaskQueuePromise) {
      if (global[symbolPromise]) {
        nativeMicroTaskQueuePromise = global[symbolPromise].resolve(0);
      }
    }
    if (nativeMicroTaskQueuePromise) {
      let nativeThen = nativeMicroTaskQueuePromise[symbolThen];
      if (!nativeThen) {
        // native Promise is not patchable, we need to use `then` directly
        // issue 1078
        nativeThen = nativeMicroTaskQueuePromise['then'];
      }
      nativeThen.call(nativeMicroTaskQueuePromise, func);
    } else {
      global[symbolSetTimeout](func, 0);
    }
  }
  function scheduleMicroTask(task) {
    // if we are not running in any task, and there has not been anything scheduled
    // we must bootstrap the initial task creation by manually scheduling the drain
    if (_numberOfNestedTaskFrames === 0 &amp;&amp; _microTaskQueue.length === 0) {
      // We are not running in Task, so we need to kickstart the microtask queue.
      nativeScheduleMicroTask(drainMicroTaskQueue);
    }
    task &amp;&amp; _microTaskQueue.push(task);
  }
  function drainMicroTaskQueue() {
    if (!_isDrainingMicrotaskQueue) {
      _isDrainingMicrotaskQueue = true;
      while (_microTaskQueue.length) {
        const queue = _microTaskQueue;
        _microTaskQueue = [];
        for (let i = 0; i &lt; queue.length; i++) {
          const task = queue[i];
          try {
            task.zone.runTask(task, null, null);
          } catch (error) {
            _api.onUnhandledError(error);
          }
        }
      }
      _api.microtaskDrainDone();
      _isDrainingMicrotaskQueue = false;
    }
  }
  //////////////////////////////////////////////////////
  //////////////////////////////////////////////////////
  ///  BOOTSTRAP
  //////////////////////////////////////////////////////
  //////////////////////////////////////////////////////
  const NO_ZONE = {
    name: 'NO ZONE'
  };
  const notScheduled = 'notScheduled',
    scheduling = 'scheduling',
    scheduled = 'scheduled',
    running = 'running',
    canceling = 'canceling',
    unknown = 'unknown';
  const microTask = 'microTask',
    macroTask = 'macroTask',
    eventTask = 'eventTask';
  const patches = {};
  const _api = {
    symbol: __symbol__,
    currentZoneFrame: () =&gt; _currentZoneFrame,
    onUnhandledError: noop,
    microtaskDrainDone: noop,
    scheduleMicroTask: scheduleMicroTask,
    showUncaughtError: () =&gt; !Zone[__symbol__('ignoreConsoleErrorUncaughtError')],
    patchEventTarget: () =&gt; [],
    patchOnProperties: noop,
    patchMethod: () =&gt; noop,
    bindArguments: () =&gt; [],
    patchThen: () =&gt; noop,
    patchMacroTask: () =&gt; noop,
    patchEventPrototype: () =&gt; noop,
    isIEOrEdge: () =&gt; false,
    getGlobalObjects: () =&gt; undefined,
    ObjectDefineProperty: () =&gt; noop,
    ObjectGetOwnPropertyDescriptor: () =&gt; undefined,
    ObjectCreate: () =&gt; undefined,
    ArraySlice: () =&gt; [],
    patchClass: () =&gt; noop,
    wrapWithCurrentZone: () =&gt; noop,
    filterProperties: () =&gt; [],
    attachOriginToPatched: () =&gt; noop,
    _redefineProperty: () =&gt; noop,
    patchCallbacks: () =&gt; noop,
    nativeScheduleMicroTask: nativeScheduleMicroTask
  };
  let _currentZoneFrame = {
    parent: null,
    zone: new Zone(null, null)
  };
  let _currentTask = null;
  let _numberOfNestedTaskFrames = 0;
  function noop() {}
  performanceMeasure('Zone', 'Zone');
  return global['Zone'] = Zone;
})(typeof window !== 'undefined' &amp;&amp; window || typeof self !== 'undefined' &amp;&amp; self || global);

/**
 * Suppress closure compiler errors about unknown 'Zone' variable
 * @fileoverview
 * @suppress {undefinedVars,globalThis,missingRequire}
 */
/// &lt;reference types="node"/&gt;
// issue #989, to reduce bundle size, use short name
/** Object.getOwnPropertyDescriptor */
const ObjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
/** Object.defineProperty */
const ObjectDefineProperty = Object.defineProperty;
/** Object.getPrototypeOf */
const ObjectGetPrototypeOf = Object.getPrototypeOf;
/** Object.create */
const ObjectCreate = Object.create;
/** Array.prototype.slice */
const ArraySlice = Array.prototype.slice;
/** addEventListener string const */
const ADD_EVENT_LISTENER_STR = 'addEventListener';
/** removeEventListener string const */
const REMOVE_EVENT_LISTENER_STR = 'removeEventListener';
/** zoneSymbol addEventListener */
const ZONE_SYMBOL_ADD_EVENT_LISTENER = Zone.__symbol__(ADD_EVENT_LISTENER_STR);
/** zoneSymbol removeEventListener */
const ZONE_SYMBOL_REMOVE_EVENT_LISTENER = Zone.__symbol__(REMOVE_EVENT_LISTENER_STR);
/** true string const */
const TRUE_STR = 'true';
/** false string const */
const FALSE_STR = 'false';
/** Zone symbol prefix string const. */
const ZONE_SYMBOL_PREFIX = Zone.__symbol__('');
function wrapWithCurrentZone(callback, source) {
  return Zone.current.wrap(callback, source);
}
function scheduleMacroTaskWithCurrentZone(source, callback, data, customSchedule, customCancel) {
  return Zone.current.scheduleMacroTask(source, callback, data, customSchedule, customCancel);
}
const zoneSymbol = Zone.__symbol__;
const isWindowExists = typeof window !== 'undefined';
const internalWindow = isWindowExists ? window : undefined;
const _global = isWindowExists &amp;&amp; internalWindow || typeof self === 'object' &amp;&amp; self || global;
const REMOVE_ATTRIBUTE = 'removeAttribute';
function bindArguments(args, source) {
  for (let i = args.length - 1; i &gt;= 0; i--) {
    if (typeof args[i] === 'function') {
      args[i] = wrapWithCurrentZone(args[i], source + '_' + i);
    }
  }
  return args;
}
function patchPrototype(prototype, fnNames) {
  const source = prototype.constructor['name'];
  for (let i = 0; i &lt; fnNames.length; i++) {
    const name = fnNames[i];
    const delegate = prototype[name];
    if (delegate) {
      const prototypeDesc = ObjectGetOwnPropertyDescriptor(prototype, name);
      if (!isPropertyWritable(prototypeDesc)) {
        continue;
      }
      prototype[name] = (delegate =&gt; {
        const patched = function () {
          return delegate.apply(this, bindArguments(arguments, source + '.' + name));
        };
        attachOriginToPatched(patched, delegate);
        return patched;
      })(delegate);
    }
  }
}
function isPropertyWritable(propertyDesc) {
  if (!propertyDesc) {
    return true;
  }
  if (propertyDesc.writable === false) {
    return false;
  }
  return !(typeof propertyDesc.get === 'function' &amp;&amp; typeof propertyDesc.set === 'undefined');
}
const isWebWorker = typeof WorkerGlobalScope !== 'undefined' &amp;&amp; self instanceof WorkerGlobalScope;
// Make sure to access `process` through `_global` so that WebPack does not accidentally browserify
// this code.
const isNode = !('nw' in _global) &amp;&amp; typeof _global.process !== 'undefined' &amp;&amp; {}.toString.call(_global.process) === '[object process]';
const isBrowser = !isNode &amp;&amp; !isWebWorker &amp;&amp; !!(isWindowExists &amp;&amp; internalWindow['HTMLElement']);
// we are in electron of nw, so we are both browser and nodejs
// Make sure to access `process` through `_global` so that WebPack does not accidentally browserify
// this code.
const isMix = typeof _global.process !== 'undefined' &amp;&amp; {}.toString.call(_global.process) === '[object process]' &amp;&amp; !isWebWorker &amp;&amp; !!(isWindowExists &amp;&amp; internalWindow['HTMLElement']);
const zoneSymbolEventNames$1 = {};
const wrapFn = function (event) {
  // https://github.com/angular/zone.js/issues/911, in IE, sometimes
  // event will be undefined, so we need to use window.event
  event = event || _global.event;
  if (!event) {
    return;
  }
  let eventNameSymbol = zoneSymbolEventNames$1[event.type];
  if (!eventNameSymbol) {
    eventNameSymbol = zoneSymbolEventNames$1[event.type] = zoneSymbol('ON_PROPERTY' + event.type);
  }
  const target = this || event.target || _global;
  const listener = target[eventNameSymbol];
  let result;
  if (isBrowser &amp;&amp; target === internalWindow &amp;&amp; event.type === 'error') {
    // window.onerror have different signature
    // https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror#window.onerror
    // and onerror callback will prevent default when callback return true
    const errorEvent = event;
    result = listener &amp;&amp; listener.call(this, errorEvent.message, errorEvent.filename, errorEvent.lineno, errorEvent.colno, errorEvent.error);
    if (result === true) {
      event.preventDefault();
    }
  } else {
    result = listener &amp;&amp; listener.apply(this, arguments);
    if (result != undefined &amp;&amp; !result) {
      event.preventDefault();
    }
  }
  return result;
};
function patchProperty(obj, prop, prototype) {
  let desc = ObjectGetOwnPropertyDescriptor(obj, prop);
  if (!desc &amp;&amp; prototype) {
    // when patch window object, use prototype to check prop exist or not
    const prototypeDesc = ObjectGetOwnPropertyDescriptor(prototype, prop);
    if (prototypeDesc) {
      desc = {
        enumerable: true,
        configurable: true
      };
    }
  }
  // if the descriptor not exists or is not configurable
  // just return
  if (!desc || !desc.configurable) {
    return;
  }
  const onPropPatchedSymbol = zoneSymbol('on' + prop + 'patched');
  if (obj.hasOwnProperty(onPropPatchedSymbol) &amp;&amp; obj[onPropPatchedSymbol]) {
    return;
  }
  // A property descriptor cannot have getter/setter and be writable
  // deleting the writable and value properties avoids this error:
  //
  // TypeError: property descriptors must not specify a value or be writable when a
  // getter or setter has been specified
  delete desc.writable;
  delete desc.value;
  const originalDescGet = desc.get;
  const originalDescSet = desc.set;
  // slice(2) cuz 'onclick' -&gt; 'click', etc
  const eventName = prop.slice(2);
  let eventNameSymbol = zoneSymbolEventNames$1[eventName];
  if (!eventNameSymbol) {
    eventNameSymbol = zoneSymbolEventNames$1[eventName] = zoneSymbol('ON_PROPERTY' + eventName);
  }
  desc.set = function (newValue) {
    // in some of windows's onproperty callback, this is undefined
    // so we need to check it
    let target = this;
    if (!target &amp;&amp; obj === _global) {
      target = _global;
    }
    if (!target) {
      return;
    }
    const previousValue = target[eventNameSymbol];
    if (typeof previousValue === 'function') {
      target.removeEventListener(eventName, wrapFn);
    }
    // issue #978, when onload handler was added before loading zone.js
    // we should remove it with originalDescSet
    originalDescSet &amp;&amp; originalDescSet.call(target, null);
    target[eventNameSymbol] = newValue;
    if (typeof newValue === 'function') {
      target.addEventListener(eventName, wrapFn, false);
    }
  };
  // The getter would return undefined for unassigned properties but the default value of an
  // unassigned property is null
  desc.get = function () {
    // in some of windows's onproperty callback, this is undefined
    // so we need to check it
    let target = this;
    if (!target &amp;&amp; obj === _global) {
      target = _global;
    }
    if (!target) {
      return null;
    }
    const listener = target[eventNameSymbol];
    if (listener) {
      return listener;
    } else if (originalDescGet) {
      // result will be null when use inline event attribute,
      // such as &lt;button onclick="func();"&gt;OK&lt;/button&gt;
      // because the onclick function is internal raw uncompiled handler
      // the onclick will be evaluated when first time event was triggered or
      // the property is accessed, https://github.com/angular/zone.js/issues/525
      // so we should use original native get to retrieve the handler
      let value = originalDescGet.call(this);
      if (value) {
        desc.set.call(this, value);
        if (typeof target[REMOVE_ATTRIBUTE] === 'function') {
          target.removeAttribute(prop);
        }
        return value;
      }
    }
    return null;
  };
  ObjectDefineProperty(obj, prop, desc);
  obj[onPropPatchedSymbol] = true;
}
function patchOnProperties(obj, properties, prototype) {
  if (properties) {
    for (let i = 0; i &lt; properties.length; i++) {
      patchProperty(obj, 'on' + properties[i], prototype);
    }
  } else {
    const onProperties = [];
    for (const prop in obj) {
      if (prop.slice(0, 2) == 'on') {
        onProperties.push(prop);
      }
    }
    for (let j = 0; j &lt; onProperties.length; j++) {
      patchProperty(obj, onProperties[j], prototype);
    }
  }
}
const originalInstanceKey = zoneSymbol('originalInstance');
// wrap some native API on `window`
function patchClass(className) {
  const OriginalClass = _global[className];
  if (!OriginalClass) return;
  // keep original class in global
  _global[zoneSymbol(className)] = OriginalClass;
  _global[className] = function () {
    const a = bindArguments(arguments, className);
    switch (a.length) {
      case 0:
        this[originalInstanceKey] = new OriginalClass();
        break;
      case 1:
        this[originalInstanceKey] = new OriginalClass(a[0]);
        break;
      case 2:
        this[originalInstanceKey] = new OriginalClass(a[0], a[1]);
        break;
      case 3:
        this[originalInstanceKey] = new OriginalClass(a[0], a[1], a[2]);
        break;
      case 4:
        this[originalInstanceKey] = new OriginalClass(a[0], a[1], a[2], a[3]);
        break;
      default:
        throw new Error('Arg list too long.');
    }
  };
  // attach original delegate to patched function
  attachOriginToPatched(_global[className], OriginalClass);
  const instance = new OriginalClass(function () {});
  let prop;
  for (prop in instance) {
    // https://bugs.webkit.org/show_bug.cgi?id=44721
    if (className === 'XMLHttpRequest' &amp;&amp; prop === 'responseBlob') continue;
    (function (prop) {
      if (typeof instance[prop] === 'function') {
        _global[className].prototype[prop] = function () {
          return this[originalInstanceKey][prop].apply(this[originalInstanceKey], arguments);
        };
      } else {
        ObjectDefineProperty(_global[className].prototype, prop, {
          set: function (fn) {
            if (typeof fn === 'function') {
              this[originalInstanceKey][prop] = wrapWithCurrentZone(fn, className + '.' + prop);
              // keep callback in wrapped function so we can
              // use it in Function.prototype.toString to return
              // the native one.
              attachOriginToPatched(this[originalInstanceKey][prop], fn);
            } else {
              this[originalInstanceKey][prop] = fn;
            }
          },
          get: function () {
            return this[originalInstanceKey][prop];
          }
        });
      }
    })(prop);
  }
  for (prop in OriginalClass) {
    if (prop !== 'prototype' &amp;&amp; OriginalClass.hasOwnProperty(prop)) {
      _global[className][prop] = OriginalClass[prop];
    }
  }
}
function patchMethod(target, name, patchFn) {
  let proto = target;
  while (proto &amp;&amp; !proto.hasOwnProperty(name)) {
    proto = ObjectGetPrototypeOf(proto);
  }
  if (!proto &amp;&amp; target[name]) {
    // somehow we did not find it, but we can see it. This happens on IE for Window properties.
    proto = target;
  }
  const delegateName = zoneSymbol(name);
  let delegate = null;
  if (proto &amp;&amp; (!(delegate = proto[delegateName]) || !proto.hasOwnProperty(delegateName))) {
    delegate = proto[delegateName] = proto[name];
    // check whether proto[name] is writable
    // some property is readonly in safari, such as HtmlCanvasElement.prototype.toBlob
    const desc = proto &amp;&amp; ObjectGetOwnPropertyDescriptor(proto, name);
    if (isPropertyWritable(desc)) {
      const patchDelegate = patchFn(delegate, delegateName, name);
      proto[name] = function () {
        return patchDelegate(this, arguments);
      };
      attachOriginToPatched(proto[name], delegate);
    }
  }
  return delegate;
}
// TODO: @JiaLiPassion, support cancel task later if necessary
function patchMacroTask(obj, funcName, metaCreator) {
  let setNative = null;
  function scheduleTask(task) {
    const data = task.data;
    data.args[data.cbIdx] = function () {
      task.invoke.apply(this, arguments);
    };
    setNative.apply(data.target, data.args);
    return task;
  }
  setNative = patchMethod(obj, funcName, delegate =&gt; function (self, args) {
    const meta = metaCreator(self, args);
    if (meta.cbIdx &gt;= 0 &amp;&amp; typeof args[meta.cbIdx] === 'function') {
      return scheduleMacroTaskWithCurrentZone(meta.name, args[meta.cbIdx], meta, scheduleTask);
    } else {
      // cause an error by calling it directly.
      return delegate.apply(self, args);
    }
  });
}
function attachOriginToPatched(patched, original) {
  patched[zoneSymbol('OriginalDelegate')] = original;
}
let isDetectedIEOrEdge = false;
let ieOrEdge = false;
function isIE() {
  try {
    const ua = internalWindow.navigator.userAgent;
    if (ua.indexOf('MSIE ') !== -1 || ua.indexOf('Trident/') !== -1) {
      return true;
    }
  } catch (error) {}
  return false;
}
function isIEOrEdge() {
  if (isDetectedIEOrEdge) {
    return ieOrEdge;
  }
  isDetectedIEOrEdge = true;
  try {
    const ua = internalWindow.navigator.userAgent;
    if (ua.indexOf('MSIE ') !== -1 || ua.indexOf('Trident/') !== -1 || ua.indexOf('Edge/') !== -1) {
      ieOrEdge = true;
    }
  } catch (error) {}
  return ieOrEdge;
}
Zone.__load_patch('ZoneAwarePromise', (global, Zone, api) =&gt; {
  const ObjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
  const ObjectDefineProperty = Object.defineProperty;
  function readableObjectToString(obj) {
    if (obj &amp;&amp; obj.toString === Object.prototype.toString) {
      const className = obj.constructor &amp;&amp; obj.constructor.name;
      return (className ? className : '') + ': ' + JSON.stringify(obj);
    }
    return obj ? obj.toString() : Object.prototype.toString.call(obj);
  }
  const __symbol__ = api.symbol;
  const _uncaughtPromiseErrors = [];
  const isDisableWrappingUncaughtPromiseRejection = global[__symbol__('DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION')] === true;
  const symbolPromise = __symbol__('Promise');
  const symbolThen = __symbol__('then');
  const creationTrace = '__creationTrace__';
  api.onUnhandledError = e =&gt; {
    if (api.showUncaughtError()) {
      const rejection = e &amp;&amp; e.rejection;
      if (rejection) {
        console.error('Unhandled Promise rejection:', rejection instanceof Error ? rejection.message : rejection, '; Zone:', e.zone.name, '; Task:', e.task &amp;&amp; e.task.source, '; Value:', rejection, rejection instanceof Error ? rejection.stack : undefined);
      } else {
        console.error(e);
      }
    }
  };
  api.microtaskDrainDone = () =&gt; {
    while (_uncaughtPromiseErrors.length) {
      const uncaughtPromiseError = _uncaughtPromiseErrors.shift();
      try {
        uncaughtPromiseError.zone.runGuarded(() =&gt; {
          if (uncaughtPromiseError.throwOriginal) {
            throw uncaughtPromiseError.rejection;
          }
          throw uncaughtPromiseError;
        });
      } catch (error) {
        handleUnhandledRejection(error);
      }
    }
  };
  const UNHANDLED_PROMISE_REJECTION_HANDLER_SYMBOL = __symbol__('unhandledPromiseRejectionHandler');
  function handleUnhandledRejection(e) {
    api.onUnhandledError(e);
    try {
      const handler = Zone[UNHANDLED_PROMISE_REJECTION_HANDLER_SYMBOL];
      if (typeof handler === 'function') {
        handler.call(this, e);
      }
    } catch (err) {}
  }
  function isThenable(value) {
    return value &amp;&amp; value.then;
  }
  function forwardResolution(value) {
    return value;
  }
  function forwardRejection(rejection) {
    return ZoneAwarePromise.reject(rejection);
  }
  const symbolState = __symbol__('state');
  const symbolValue = __symbol__('value');
  const symbolFinally = __symbol__('finally');
  const symbolParentPromiseValue = __symbol__('parentPromiseValue');
  const symbolParentPromiseState = __symbol__('parentPromiseState');
  const source = 'Promise.then';
  const UNRESOLVED = null;
  const RESOLVED = true;
  const REJECTED = false;
  const REJECTED_NO_CATCH = 0;
  function makeResolver(promise, state) {
    return v =&gt; {
      try {
        resolvePromise(promise, state, v);
      } catch (err) {
        resolvePromise(promise, false, err);
      }
      // Do not return value or you will break the Promise spec.
    };
  }

  const once = function () {
    let wasCalled = false;
    return function wrapper(wrappedFunction) {
      return function () {
        if (wasCalled) {
          return;
        }
        wasCalled = true;
        wrappedFunction.apply(null, arguments);
      };
    };
  };
  const TYPE_ERROR = 'Promise resolved with itself';
  const CURRENT_TASK_TRACE_SYMBOL = __symbol__('currentTaskTrace');
  // Promise Resolution
  function resolvePromise(promise, state, value) {
    const onceWrapper = once();
    if (promise === value) {
      throw new TypeError(TYPE_ERROR);
    }
    if (promise[symbolState] === UNRESOLVED) {
      // should only get value.then once based on promise spec.
      let then = null;
      try {
        if (typeof value === 'object' || typeof value === 'function') {
          then = value &amp;&amp; value.then;
        }
      } catch (err) {
        onceWrapper(() =&gt; {
          resolvePromise(promise, false, err);
        })();
        return promise;
      }
      // if (value instanceof ZoneAwarePromise) {
      if (state !== REJECTED &amp;&amp; value instanceof ZoneAwarePromise &amp;&amp; value.hasOwnProperty(symbolState) &amp;&amp; value.hasOwnProperty(symbolValue) &amp;&amp; value[symbolState] !== UNRESOLVED) {
        clearRejectedNoCatch(value);
        resolvePromise(promise, value[symbolState], value[symbolValue]);
      } else if (state !== REJECTED &amp;&amp; typeof then === 'function') {
        try {
          then.call(value, onceWrapper(makeResolver(promise, state)), onceWrapper(makeResolver(promise, false)));
        } catch (err) {
          onceWrapper(() =&gt; {
            resolvePromise(promise, false, err);
          })();
        }
      } else {
        promise[symbolState] = state;
        const queue = promise[symbolValue];
        promise[symbolValue] = value;
        if (promise[symbolFinally] === symbolFinally) {
          // the promise is generated by Promise.prototype.finally
          if (state === RESOLVED) {
            // the state is resolved, should ignore the value
            // and use parent promise value
            promise[symbolState] = promise[symbolParentPromiseState];
            promise[symbolValue] = promise[symbolParentPromiseValue];
          }
        }
        // record task information in value when error occurs, so we can
        // do some additional work such as render longStackTrace
        if (state === REJECTED &amp;&amp; value instanceof Error) {
          // check if longStackTraceZone is here
          const trace = Zone.currentTask &amp;&amp; Zone.currentTask.data &amp;&amp; Zone.currentTask.data[creationTrace];
          if (trace) {
            // only keep the long stack trace into error when in longStackTraceZone
            ObjectDefineProperty(value, CURRENT_TASK_TRACE_SYMBOL, {
              configurable: true,
              enumerable: false,
              writable: true,
              value: trace
            });
          }
        }
        for (let i = 0; i &lt; queue.length;) {
          scheduleResolveOrReject(promise, queue[i++], queue[i++], queue[i++], queue[i++]);
        }
        if (queue.length == 0 &amp;&amp; state == REJECTED) {
          promise[symbolState] = REJECTED_NO_CATCH;
          let uncaughtPromiseError = value;
          try {
            // Here we throws a new Error to print more readable error log
            // and if the value is not an error, zone.js builds an `Error`
            // Object here to attach the stack information.
            throw new Error('Uncaught (in promise): ' + readableObjectToString(value) + (value &amp;&amp; value.stack ? '\n' + value.stack : ''));
          } catch (err) {
            uncaughtPromiseError = err;
          }
          if (isDisableWrappingUncaughtPromiseRejection) {
            // If disable wrapping uncaught promise reject
            // use the value instead of wrapping it.
            uncaughtPromiseError.throwOriginal = true;
          }
          uncaughtPromiseError.rejection = value;
          uncaughtPromiseError.promise = promise;
          uncaughtPromiseError.zone = Zone.current;
          uncaughtPromiseError.task = Zone.currentTask;
          _uncaughtPromiseErrors.push(uncaughtPromiseError);
          api.scheduleMicroTask(); // to make sure that it is running
        }
      }
    }
    // Resolving an already resolved promise is a noop.
    return promise;
  }
  const REJECTION_HANDLED_HANDLER = __symbol__('rejectionHandledHandler');
  function clearRejectedNoCatch(promise) {
    if (promise[symbolState] === REJECTED_NO_CATCH) {
      // if the promise is rejected no catch status
      // and queue.length &gt; 0, means there is a error handler
      // here to handle the rejected promise, we should trigger
      // windows.rejectionhandled eventHandler or nodejs rejectionHandled
      // eventHandler
      try {
        const handler = Zone[REJECTION_HANDLED_HANDLER];
        if (handler &amp;&amp; typeof handler === 'function') {
          handler.call(this, {
            rejection: promise[symbolValue],
            promise: promise
          });
        }
      } catch (err) {}
      promise[symbolState] = REJECTED;
      for (let i = 0; i &lt; _uncaughtPromiseErrors.length; i++) {
        if (promise === _uncaughtPromiseErrors[i].promise) {
          _uncaughtPromiseErrors.splice(i, 1);
        }
      }
    }
  }
  function scheduleResolveOrReject(promise, zone, chainPromise, onFulfilled, onRejected) {
    clearRejectedNoCatch(promise);
    const promiseState = promise[symbolState];
    const delegate = promiseState ? typeof onFulfilled === 'function' ? onFulfilled : forwardResolution : typeof onRejected === 'function' ? onRejected : forwardRejection;
    zone.scheduleMicroTask(source, () =&gt; {
      try {
        const parentPromiseValue = promise[symbolValue];
        const isFinallyPromise = !!chainPromise &amp;&amp; symbolFinally === chainPromise[symbolFinally];
        if (isFinallyPromise) {
          // if the promise is generated from finally call, keep parent promise's state and value
          chainPromise[symbolParentPromiseValue] = parentPromiseValue;
          chainPromise[symbolParentPromiseState] = promiseState;
        }
        // should not pass value to finally callback
        const value = zone.run(delegate, undefined, isFinallyPromise &amp;&amp; delegate !== forwardRejection &amp;&amp; delegate !== forwardResolution ? [] : [parentPromiseValue]);
        resolvePromise(chainPromise, true, value);
      } catch (error) {
        // if error occurs, should always return this error
        resolvePromise(chainPromise, false, error);
      }
    }, chainPromise);
  }
  const ZONE_AWARE_PROMISE_TO_STRING = 'function ZoneAwarePromise() { [native code] }';
  const noop = function () {};
  const AggregateError = global.AggregateError;
  class ZoneAwarePromise {
    static toString() {
      return ZONE_AWARE_PROMISE_TO_STRING;
    }
    static resolve(value) {
      return resolvePromise(new this(null), RESOLVED, value);
    }
    static reject(error) {
      return resolvePromise(new this(null), REJECTED, error);
    }
    static any(values) {
      if (!values || typeof values[Symbol.iterator] !== 'function') {
        return Promise.reject(new AggregateError([], 'All promises were rejected'));
      }
      const promises = [];
      let count = 0;
      try {
        for (let v of values) {
          count++;
          promises.push(ZoneAwarePromise.resolve(v));
        }
      } catch (err) {
        return Promise.reject(new AggregateError([], 'All promises were rejected'));
      }
      if (count === 0) {
        return Promise.reject(new AggregateError([], 'All promises were rejected'));
      }
      let finished = false;
      const errors = [];
      return new ZoneAwarePromise((resolve, reject) =&gt; {
        for (let i = 0; i &lt; promises.length; i++) {
          promises[i].then(v =&gt; {
            if (finished) {
              return;
            }
            finished = true;
            resolve(v);
          }, err =&gt; {
            errors.push(err);
            count--;
            if (count === 0) {
              finished = true;
              reject(new AggregateError(errors, 'All promises were rejected'));
            }
          });
        }
      });
    }
    static race(values) {
      let resolve;
      let reject;
      let promise = new this((res, rej) =&gt; {
        resolve = res;
        reject = rej;
      });
      function onResolve(value) {
        resolve(value);
      }
      function onReject(error) {
        reject(error);
      }
      for (let value of values) {
        if (!isThenable(value)) {
          value = this.resolve(value);
        }
        value.then(onResolve, onReject);
      }
      return promise;
    }
    static all(values) {
      return ZoneAwarePromise.allWithCallback(values);
    }
    static allSettled(values) {
      const P = this &amp;&amp; this.prototype instanceof ZoneAwarePromise ? this : ZoneAwarePromise;
      return P.allWithCallback(values, {
        thenCallback: value =&gt; ({
          status: 'fulfilled',
          value
        }),
        errorCallback: err =&gt; ({
          status: 'rejected',
          reason: err
        })
      });
    }
    static allWithCallback(values, callback) {
      let resolve;
      let reject;
      let promise = new this((res, rej) =&gt; {
        resolve = res;
        reject = rej;
      });
      // Start at 2 to prevent prematurely resolving if .then is called immediately.
      let unresolvedCount = 2;
      let valueIndex = 0;
      const resolvedValues = [];
      for (let value of values) {
        if (!isThenable(value)) {
          value = this.resolve(value);
        }
        const curValueIndex = valueIndex;
        try {
          value.then(value =&gt; {
            resolvedValues[curValueIndex] = callback ? callback.thenCallback(value) : value;
            unresolvedCount--;
            if (unresolvedCount === 0) {
              resolve(resolvedValues);
            }
          }, err =&gt; {
            if (!callback) {
              reject(err);
            } else {
              resolvedValues[curValueIndex] = callback.errorCallback(err);
              unresolvedCount--;
              if (unresolvedCount === 0) {
                resolve(resolvedValues);
              }
            }
          });
        } catch (thenErr) {
          reject(thenErr);
        }
        unresolvedCount++;
        valueIndex++;
      }
      // Make the unresolvedCount zero-based again.
      unresolvedCount -= 2;
      if (unresolvedCount === 0) {
        resolve(resolvedValues);
      }
      return promise;
    }
    constructor(executor) {
      const promise = this;
      if (!(promise instanceof ZoneAwarePromise)) {
        throw new Error('Must be an instanceof Promise.');
      }
      promise[symbolState] = UNRESOLVED;
      promise[symbolValue] = []; // queue;
      try {
        const onceWrapper = once();
        executor &amp;&amp; executor(onceWrapper(makeResolver(promise, RESOLVED)), onceWrapper(makeResolver(promise, REJECTED)));
      } catch (error) {
        resolvePromise(promise, false, error);
      }
    }
    get [Symbol.toStringTag]() {
      return 'Promise';
    }
    get [Symbol.species]() {
      return ZoneAwarePromise;
    }
    then(onFulfilled, onRejected) {
      // We must read `Symbol.species` safely because `this` may be anything. For instance, `this`
      // may be an object without a prototype (created through `Object.create(null)`); thus
      // `this.constructor` will be undefined. One of the use cases is SystemJS creating
      // prototype-less objects (modules) via `Object.create(null)`. The SystemJS creates an empty
      // object and copies promise properties into that object (within the `getOrCreateLoad`
      // function). The zone.js then checks if the resolved value has the `then` method and invokes
      // it with the `value` context. Otherwise, this will throw an error: `TypeError: Cannot read
      // properties of undefined (reading 'Symbol(Symbol.species)')`.
      let C = this.constructor?.[Symbol.species];
      if (!C || typeof C !== 'function') {
        C = this.constructor || ZoneAwarePromise;
      }
      const chainPromise = new C(noop);
      const zone = Zone.current;
      if (this[symbolState] == UNRESOLVED) {
        this[symbolValue].push(zone, chainPromise, onFulfilled, onRejected);
      } else {
        scheduleResolveOrReject(this, zone, chainPromise, onFulfilled, onRejected);
      }
      return chainPromise;
    }
    catch(onRejected) {
      return this.then(null, onRejected);
    }
    finally(onFinally) {
      // See comment on the call to `then` about why thee `Symbol.species` is safely accessed.
      let C = this.constructor?.[Symbol.species];
      if (!C || typeof C !== 'function') {
        C = ZoneAwarePromise;
      }
      const chainPromise = new C(noop);
      chainPromise[symbolFinally] = symbolFinally;
      const zone = Zone.current;
      if (this[symbolState] == UNRESOLVED) {
        this[symbolValue].push(zone, chainPromise, onFinally, onFinally);
      } else {
        scheduleResolveOrReject(this, zone, chainPromise, onFinally, onFinally);
      }
      return chainPromise;
    }
  }
  // Protect against aggressive optimizers dropping seemingly unused properties.
  // E.g. Closure Compiler in advanced mode.
  ZoneAwarePromise['resolve'] = ZoneAwarePromise.resolve;
  ZoneAwarePromise['reject'] = ZoneAwarePromise.reject;
  ZoneAwarePromise['race'] = ZoneAwarePromise.race;
  ZoneAwarePromise['all'] = ZoneAwarePromise.all;
  const NativePromise = global[symbolPromise] = global['Promise'];
  global['Promise'] = ZoneAwarePromise;
  const symbolThenPatched = __symbol__('thenPatched');
  function patchThen(Ctor) {
    const proto = Ctor.prototype;
    const prop = ObjectGetOwnPropertyDescriptor(proto, 'then');
    if (prop &amp;&amp; (prop.writable === false || !prop.configurable)) {
      // check Ctor.prototype.then propertyDescriptor is writable or not
      // in meteor env, writable is false, we should ignore such case
      return;
    }
    const originalThen = proto.then;
    // Keep a reference to the original method.
    proto[symbolThen] = originalThen;
    Ctor.prototype.then = function (onResolve, onReject) {
      const wrapped = new ZoneAwarePromise((resolve, reject) =&gt; {
        originalThen.call(this, resolve, reject);
      });
      return wrapped.then(onResolve, onReject);
    };
    Ctor[symbolThenPatched] = true;
  }
  api.patchThen = patchThen;
  function zoneify(fn) {
    return function (self, args) {
      let resultPromise = fn.apply(self, args);
      if (resultPromise instanceof ZoneAwarePromise) {
        return resultPromise;
      }
      let ctor = resultPromise.constructor;
      if (!ctor[symbolThenPatched]) {
        patchThen(ctor);
      }
      return resultPromise;
    };
  }
  if (NativePromise) {
    patchThen(NativePromise);
    patchMethod(global, 'fetch', delegate =&gt; zoneify(delegate));
  }
  // This is not part of public API, but it is useful for tests, so we expose it.
  Promise[Zone.__symbol__('uncaughtPromiseErrors')] = _uncaughtPromiseErrors;
  return ZoneAwarePromise;
});

// override Function.prototype.toString to make zone.js patched function
// look like native function
Zone.__load_patch('toString', global =&gt; {
  // patch Func.prototype.toString to let them look like native
  const originalFunctionToString = Function.prototype.toString;
  const ORIGINAL_DELEGATE_SYMBOL = zoneSymbol('OriginalDelegate');
  const PROMISE_SYMBOL = zoneSymbol('Promise');
  const ERROR_SYMBOL = zoneSymbol('Error');
  const newFunctionToString = function toString() {
    if (typeof this === 'function') {
      const originalDelegate = this[ORIGINAL_DELEGATE_SYMBOL];
      if (originalDelegate) {
        if (typeof originalDelegate === 'function') {
          return originalFunctionToString.call(originalDelegate);
        } else {
          return Object.prototype.toString.call(originalDelegate);
        }
      }
      if (this === Promise) {
        const nativePromise = global[PROMISE_SYMBOL];
        if (nativePromise) {
          return originalFunctionToString.call(nativePromise);
        }
      }
      if (this === Error) {
        const nativeError = global[ERROR_SYMBOL];
        if (nativeError) {
          return originalFunctionToString.call(nativeError);
        }
      }
    }
    return originalFunctionToString.call(this);
  };
  newFunctionToString[ORIGINAL_DELEGATE_SYMBOL] = originalFunctionToString;
  Function.prototype.toString = newFunctionToString;
  // patch Object.prototype.toString to let them look like native
  const originalObjectToString = Object.prototype.toString;
  const PROMISE_OBJECT_TO_STRING = '[object Promise]';
  Object.prototype.toString = function () {
    if (typeof Promise === 'function' &amp;&amp; this instanceof Promise) {
      return PROMISE_OBJECT_TO_STRING;
    }
    return originalObjectToString.call(this);
  };
});

/**
 * @fileoverview
 * @suppress {missingRequire}
 */
let passiveSupported = false;
if (typeof window !== 'undefined') {
  try {
    const options = Object.defineProperty({}, 'passive', {
      get: function () {
        passiveSupported = true;
      }
    });
    // Note: We pass the `options` object as the event handler too. This is not compatible with the
    // signature of `addEventListener` or `removeEventListener` but enables us to remove the handler
    // without an actual handler.
    window.addEventListener('test', options, options);
    window.removeEventListener('test', options, options);
  } catch (err) {
    passiveSupported = false;
  }
}
// an identifier to tell ZoneTask do not create a new invoke closure
const OPTIMIZED_ZONE_EVENT_TASK_DATA = {
  useG: true
};
const zoneSymbolEventNames = {};
const globalSources = {};
const EVENT_NAME_SYMBOL_REGX = new RegExp('^' + ZONE_SYMBOL_PREFIX + '(\\w+)(true|false)$');
const IMMEDIATE_PROPAGATION_SYMBOL = zoneSymbol('propagationStopped');
function prepareEventNames(eventName, eventNameToString) {
  const falseEventName = (eventNameToString ? eventNameToString(eventName) : eventName) + FALSE_STR;
  const trueEventName = (eventNameToString ? eventNameToString(eventName) : eventName) + TRUE_STR;
  const symbol = ZONE_SYMBOL_PREFIX + falseEventName;
  const symbolCapture = ZONE_SYMBOL_PREFIX + trueEventName;
  zoneSymbolEventNames[eventName] = {};
  zoneSymbolEventNames[eventName][FALSE_STR] = symbol;
  zoneSymbolEventNames[eventName][TRUE_STR] = symbolCapture;
}
function patchEventTarget(_global, api, apis, patchOptions) {
  const ADD_EVENT_LISTENER = patchOptions &amp;&amp; patchOptions.add || ADD_EVENT_LISTENER_STR;
  const REMOVE_EVENT_LISTENER = patchOptions &amp;&amp; patchOptions.rm || REMOVE_EVENT_LISTENER_STR;
  const LISTENERS_EVENT_LISTENER = patchOptions &amp;&amp; patchOptions.listeners || 'eventListeners';
  const REMOVE_ALL_LISTENERS_EVENT_LISTENER = patchOptions &amp;&amp; patchOptions.rmAll || 'removeAllListeners';
  const zoneSymbolAddEventListener = zoneSymbol(ADD_EVENT_LISTENER);
  const ADD_EVENT_LISTENER_SOURCE = '.' + ADD_EVENT_LISTENER + ':';
  const PREPEND_EVENT_LISTENER = 'prependListener';
  const PREPEND_EVENT_LISTENER_SOURCE = '.' + PREPEND_EVENT_LISTENER + ':';
  const invokeTask = function (task, target, event) {
    // for better performance, check isRemoved which is set
    // by removeEventListener
    if (task.isRemoved) {
      return;
    }
    const delegate = task.callback;
    if (typeof delegate === 'object' &amp;&amp; delegate.handleEvent) {
      // create the bind version of handleEvent when invoke
      task.callback = event =&gt; delegate.handleEvent(event);
      task.originalDelegate = delegate;
    }
    // invoke static task.invoke
    // need to try/catch error here, otherwise, the error in one event listener
    // will break the executions of the other event listeners. Also error will
    // not remove the event listener when `once` options is true.
    let error;
    try {
      task.invoke(task, target, [event]);
    } catch (err) {
      error = err;
    }
    const options = task.options;
    if (options &amp;&amp; typeof options === 'object' &amp;&amp; options.once) {
      // if options.once is true, after invoke once remove listener here
      // only browser need to do this, nodejs eventEmitter will cal removeListener
      // inside EventEmitter.once
      const delegate = task.originalDelegate ? task.originalDelegate : task.callback;
      target[REMOVE_EVENT_LISTENER].call(target, event.type, delegate, options);
    }
    return error;
  };
  function globalCallback(context, event, isCapture) {
    // https://github.com/angular/zone.js/issues/911, in IE, sometimes
    // event will be undefined, so we need to use window.event
    event = event || _global.event;
    if (!event) {
      return;
    }
    // event.target is needed for Samsung TV and SourceBuffer
    // || global is needed https://github.com/angular/zone.js/issues/190
    const target = context || event.target || _global;
    const tasks = target[zoneSymbolEventNames[event.type][isCapture ? TRUE_STR : FALSE_STR]];
    if (tasks) {
      const errors = [];
      // invoke all tasks which attached to current target with given event.type and capture = false
      // for performance concern, if task.length === 1, just invoke
      if (tasks.length === 1) {
        const err = invokeTask(tasks[0], target, event);
        err &amp;&amp; errors.push(err);
      } else {
        // https://github.com/angular/zone.js/issues/836
        // copy the tasks array before invoke, to avoid
        // the callback will remove itself or other listener
        const copyTasks = tasks.slice();
        for (let i = 0; i &lt; copyTasks.length; i++) {
          if (event &amp;&amp; event[IMMEDIATE_PROPAGATION_SYMBOL] === true) {
            break;
          }
          const err = invokeTask(copyTasks[i], target, event);
          err &amp;&amp; errors.push(err);
        }
      }
      // Since there is only one error, we don't need to schedule microTask
      // to throw the error.
      if (errors.length === 1) {
        throw errors[0];
      } else {
        for (let i = 0; i &lt; errors.length; i++) {
          const err = errors[i];
          api.nativeScheduleMicroTask(() =&gt; {
            throw err;
          });
        }
      }
    }
  }
  // global shared zoneAwareCallback to handle all event callback with capture = false
  const globalZoneAwareCallback = function (event) {
    return globalCallback(this, event, false);
  };
  // global shared zoneAwareCallback to handle all event callback with capture = true
  const globalZoneAwareCaptureCallback = function (event) {
    return globalCallback(this, event, true);
  };
  function patchEventTargetMethods(obj, patchOptions) {
    if (!obj) {
      return false;
    }
    let useGlobalCallback = true;
    if (patchOptions &amp;&amp; patchOptions.useG !== undefined) {
      useGlobalCallback = patchOptions.useG;
    }
    const validateHandler = patchOptions &amp;&amp; patchOptions.vh;
    let checkDuplicate = true;
    if (patchOptions &amp;&amp; patchOptions.chkDup !== undefined) {
      checkDuplicate = patchOptions.chkDup;
    }
    let returnTarget = false;
    if (patchOptions &amp;&amp; patchOptions.rt !== undefined) {
      returnTarget = patchOptions.rt;
    }
    let proto = obj;
    while (proto &amp;&amp; !proto.hasOwnProperty(ADD_EVENT_LISTENER)) {
      proto = ObjectGetPrototypeOf(proto);
    }
    if (!proto &amp;&amp; obj[ADD_EVENT_LISTENER]) {
      // somehow we did not find it, but we can see it. This happens on IE for Window properties.
      proto = obj;
    }
    if (!proto) {
      return false;
    }
    if (proto[zoneSymbolAddEventListener]) {
      return false;
    }
    const eventNameToString = patchOptions &amp;&amp; patchOptions.eventNameToString;
    // a shared global taskData to pass data for scheduleEventTask
    // so we do not need to create a new object just for pass some data
    const taskData = {};
    const nativeAddEventListener = proto[zoneSymbolAddEventListener] = proto[ADD_EVENT_LISTENER];
    const nativeRemoveEventListener = proto[zoneSymbol(REMOVE_EVENT_LISTENER)] = proto[REMOVE_EVENT_LISTENER];
    const nativeListeners = proto[zoneSymbol(LISTENERS_EVENT_LISTENER)] = proto[LISTENERS_EVENT_LISTENER];
    const nativeRemoveAllListeners = proto[zoneSymbol(REMOVE_ALL_LISTENERS_EVENT_LISTENER)] = proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER];
    let nativePrependEventListener;
    if (patchOptions &amp;&amp; patchOptions.prepend) {
      nativePrependEventListener = proto[zoneSymbol(patchOptions.prepend)] = proto[patchOptions.prepend];
    }
    /**
     * This util function will build an option object with passive option
     * to handle all possible input from the user.
     */
    function buildEventListenerOptions(options, passive) {
      if (!passiveSupported &amp;&amp; typeof options === 'object' &amp;&amp; options) {
        // doesn't support passive but user want to pass an object as options.
        // this will not work on some old browser, so we just pass a boolean
        // as useCapture parameter
        return !!options.capture;
      }
      if (!passiveSupported || !passive) {
        return options;
      }
      if (typeof options === 'boolean') {
        return {
          capture: options,
          passive: true
        };
      }
      if (!options) {
        return {
          passive: true
        };
      }
      if (typeof options === 'object' &amp;&amp; options.passive !== false) {
        return {
          ...options,
          passive: true
        };
      }
      return options;
    }
    const customScheduleGlobal = function (task) {
      // if there is already a task for the eventName + capture,
      // just return, because we use the shared globalZoneAwareCallback here.
      if (taskData.isExisting) {
        return;
      }
      return nativeAddEventListener.call(taskData.target, taskData.eventName, taskData.capture ? globalZoneAwareCaptureCallback : globalZoneAwareCallback, taskData.options);
    };
    const customCancelGlobal = function (task) {
      // if task is not marked as isRemoved, this call is directly
      // from Zone.prototype.cancelTask, we should remove the task
      // from tasksList of target first
      if (!task.isRemoved) {
        const symbolEventNames = zoneSymbolEventNames[task.eventName];
        let symbolEventName;
        if (symbolEventNames) {
          symbolEventName = symbolEventNames[task.capture ? TRUE_STR : FALSE_STR];
        }
        const existingTasks = symbolEventName &amp;&amp; task.target[symbolEventName];
        if (existingTasks) {
          for (let i = 0; i &lt; existingTasks.length; i++) {
            const existingTask = existingTasks[i];
            if (existingTask === task) {
              existingTasks.splice(i, 1);
              // set isRemoved to data for faster invokeTask check
              task.isRemoved = true;
              if (existingTasks.length === 0) {
                // all tasks for the eventName + capture have gone,
                // remove globalZoneAwareCallback and remove the task cache from target
                task.allRemoved = true;
                task.target[symbolEventName] = null;
              }
              break;
            }
          }
        }
      }
      // if all tasks for the eventName + capture have gone,
      // we will really remove the global event callback,
      // if not, return
      if (!task.allRemoved) {
        return;
      }
      return nativeRemoveEventListener.call(task.target, task.eventName, task.capture ? globalZoneAwareCaptureCallback : globalZoneAwareCallback, task.options);
    };
    const customScheduleNonGlobal = function (task) {
      return nativeAddEventListener.call(taskData.target, taskData.eventName, task.invoke, taskData.options);
    };
    const customSchedulePrepend = function (task) {
      return nativePrependEventListener.call(taskData.target, taskData.eventName, task.invoke, taskData.options);
    };
    const customCancelNonGlobal = function (task) {
      return nativeRemoveEventListener.call(task.target, task.eventName, task.invoke, task.options);
    };
    const customSchedule = useGlobalCallback ? customScheduleGlobal : customScheduleNonGlobal;
    const customCancel = useGlobalCallback ? customCancelGlobal : customCancelNonGlobal;
    const compareTaskCallbackVsDelegate = function (task, delegate) {
      const typeOfDelegate = typeof delegate;
      return typeOfDelegate === 'function' &amp;&amp; task.callback === delegate || typeOfDelegate === 'object' &amp;&amp; task.originalDelegate === delegate;
    };
    const compare = patchOptions &amp;&amp; patchOptions.diff ? patchOptions.diff : compareTaskCallbackVsDelegate;
    const unpatchedEvents = Zone[zoneSymbol('UNPATCHED_EVENTS')];
    const passiveEvents = _global[zoneSymbol('PASSIVE_EVENTS')];
    const makeAddListener = function (nativeListener, addSource, customScheduleFn, customCancelFn, returnTarget = false, prepend = false) {
      return function () {
        const target = this || _global;
        let eventName = arguments[0];
        if (patchOptions &amp;&amp; patchOptions.transferEventName) {
          eventName = patchOptions.transferEventName(eventName);
        }
        let delegate = arguments[1];
        if (!delegate) {
          return nativeListener.apply(this, arguments);
        }
        if (isNode &amp;&amp; eventName === 'uncaughtException') {
          // don't patch uncaughtException of nodejs to prevent endless loop
          return nativeListener.apply(this, arguments);
        }
        // don't create the bind delegate function for handleEvent
        // case here to improve addEventListener performance
        // we will create the bind delegate when invoke
        let isHandleEvent = false;
        if (typeof delegate !== 'function') {
          if (!delegate.handleEvent) {
            return nativeListener.apply(this, arguments);
          }
          isHandleEvent = true;
        }
        if (validateHandler &amp;&amp; !validateHandler(nativeListener, delegate, target, arguments)) {
          return;
        }
        const passive = passiveSupported &amp;&amp; !!passiveEvents &amp;&amp; passiveEvents.indexOf(eventName) !== -1;
        const options = buildEventListenerOptions(arguments[2], passive);
        if (unpatchedEvents) {
          // check unpatched list
          for (let i = 0; i &lt; unpatchedEvents.length; i++) {
            if (eventName === unpatchedEvents[i]) {
              if (passive) {
                return nativeListener.call(target, eventName, delegate, options);
              } else {
                return nativeListener.apply(this, arguments);
              }
            }
          }
        }
        const capture = !options ? false : typeof options === 'boolean' ? true : options.capture;
        const once = options &amp;&amp; typeof options === 'object' ? options.once : false;
        const zone = Zone.current;
        let symbolEventNames = zoneSymbolEventNames[eventName];
        if (!symbolEventNames) {
          prepareEventNames(eventName, eventNameToString);
          symbolEventNames = zoneSymbolEventNames[eventName];
        }
        const symbolEventName = symbolEventNames[capture ? TRUE_STR : FALSE_STR];
        let existingTasks = target[symbolEventName];
        let isExisting = false;
        if (existingTasks) {
          // already have task registered
          isExisting = true;
          if (checkDuplicate) {
            for (let i = 0; i &lt; existingTasks.length; i++) {
              if (compare(existingTasks[i], delegate)) {
                // same callback, same capture, same event name, just return
                return;
              }
            }
          }
        } else {
          existingTasks = target[symbolEventName] = [];
        }
        let source;
        const constructorName = target.constructor['name'];
        const targetSource = globalSources[constructorName];
        if (targetSource) {
          source = targetSource[eventName];
        }
        if (!source) {
          source = constructorName + addSource + (eventNameToString ? eventNameToString(eventName) : eventName);
        }
        // do not create a new object as task.data to pass those things
        // just use the global shared one
        taskData.options = options;
        if (once) {
          // if addEventListener with once options, we don't pass it to
          // native addEventListener, instead we keep the once setting
          // and handle ourselves.
          taskData.options.once = false;
        }
        taskData.target = target;
        taskData.capture = capture;
        taskData.eventName = eventName;
        taskData.isExisting = isExisting;
        const data = useGlobalCallback ? OPTIMIZED_ZONE_EVENT_TASK_DATA : undefined;
        // keep taskData into data to allow onScheduleEventTask to access the task information
        if (data) {
          data.taskData = taskData;
        }
        const task = zone.scheduleEventTask(source, delegate, data, customScheduleFn, customCancelFn);
        // should clear taskData.target to avoid memory leak
        // issue, https://github.com/angular/angular/issues/20442
        taskData.target = null;
        // need to clear up taskData because it is a global object
        if (data) {
          data.taskData = null;
        }
        // have to save those information to task in case
        // application may call task.zone.cancelTask() directly
        if (once) {
          options.once = true;
        }
        if (!(!passiveSupported &amp;&amp; typeof task.options === 'boolean')) {
          // if not support passive, and we pass an option object
          // to addEventListener, we should save the options to task
          task.options = options;
        }
        task.target = target;
        task.capture = capture;
        task.eventName = eventName;
        if (isHandleEvent) {
          // save original delegate for compare to check duplicate
          task.originalDelegate = delegate;
        }
        if (!prepend) {
          existingTasks.push(task);
        } else {
          existingTasks.unshift(task);
        }
        if (returnTarget) {
          return target;
        }
      };
    };
    proto[ADD_EVENT_LISTENER] = makeAddListener(nativeAddEventListener, ADD_EVENT_LISTENER_SOURCE, customSchedule, customCancel, returnTarget);
    if (nativePrependEventListener) {
      proto[PREPEND_EVENT_LISTENER] = makeAddListener(nativePrependEventListener, PREPEND_EVENT_LISTENER_SOURCE, customSchedulePrepend, customCancel, returnTarget, true);
    }
    proto[REMOVE_EVENT_LISTENER] = function () {
      const target = this || _global;
      let eventName = arguments[0];
      if (patchOptions &amp;&amp; patchOptions.transferEventName) {
        eventName = patchOptions.transferEventName(eventName);
      }
      const options = arguments[2];
      const capture = !options ? false : typeof options === 'boolean' ? true : options.capture;
      const delegate = arguments[1];
      if (!delegate) {
        return nativeRemoveEventListener.apply(this, arguments);
      }
      if (validateHandler &amp;&amp; !validateHandler(nativeRemoveEventListener, delegate, target, arguments)) {
        return;
      }
      const symbolEventNames = zoneSymbolEventNames[eventName];
      let symbolEventName;
      if (symbolEventNames) {
        symbolEventName = symbolEventNames[capture ? TRUE_STR : FALSE_STR];
      }
      const existingTasks = symbolEventName &amp;&amp; target[symbolEventName];
      if (existingTasks) {
        for (let i = 0; i &lt; existingTasks.length; i++) {
          const existingTask = existingTasks[i];
          if (compare(existingTask, delegate)) {
            existingTasks.splice(i, 1);
            // set isRemoved to data for faster invokeTask check
            existingTask.isRemoved = true;
            if (existingTasks.length === 0) {
              // all tasks for the eventName + capture have gone,
              // remove globalZoneAwareCallback and remove the task cache from target
              existingTask.allRemoved = true;
              target[symbolEventName] = null;
              // in the target, we have an event listener which is added by on_property
              // such as target.onclick = function() {}, so we need to clear this internal
              // property too if all delegates all removed
              if (typeof eventName === 'string') {
                const onPropertySymbol = ZONE_SYMBOL_PREFIX + 'ON_PROPERTY' + eventName;
                target[onPropertySymbol] = null;
              }
            }
            existingTask.zone.cancelTask(existingTask);
            if (returnTarget) {
              return target;
            }
            return;
          }
        }
      }
      // issue 930, didn't find the event name or callback
      // from zone kept existingTasks, the callback maybe
      // added outside of zone, we need to call native removeEventListener
      // to try to remove it.
      return nativeRemoveEventListener.apply(this, arguments);
    };
    proto[LISTENERS_EVENT_LISTENER] = function () {
      const target = this || _global;
      let eventName = arguments[0];
      if (patchOptions &amp;&amp; patchOptions.transferEventName) {
        eventName = patchOptions.transferEventName(eventName);
      }
      const listeners = [];
      const tasks = findEventTasks(target, eventNameToString ? eventNameToString(eventName) : eventName);
      for (let i = 0; i &lt; tasks.length; i++) {
        const task = tasks[i];
        let delegate = task.originalDelegate ? task.originalDelegate : task.callback;
        listeners.push(delegate);
      }
      return listeners;
    };
    proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER] = function () {
      const target = this || _global;
      let eventName = arguments[0];
      if (!eventName) {
        const keys = Object.keys(target);
        for (let i = 0; i &lt; keys.length; i++) {
          const prop = keys[i];
          const match = EVENT_NAME_SYMBOL_REGX.exec(prop);
          let evtName = match &amp;&amp; match[1];
          // in nodejs EventEmitter, removeListener event is
          // used for monitoring the removeListener call,
          // so just keep removeListener eventListener until
          // all other eventListeners are removed
          if (evtName &amp;&amp; evtName !== 'removeListener') {
            this[REMOVE_ALL_LISTENERS_EVENT_LISTENER].call(this, evtName);
          }
        }
        // remove removeListener listener finally
        this[REMOVE_ALL_LISTENERS_EVENT_LISTENER].call(this, 'removeListener');
      } else {
        if (patchOptions &amp;&amp; patchOptions.transferEventName) {
          eventName = patchOptions.transferEventName(eventName);
        }
        const symbolEventNames = zoneSymbolEventNames[eventName];
        if (symbolEventNames) {
          const symbolEventName = symbolEventNames[FALSE_STR];
          const symbolCaptureEventName = symbolEventNames[TRUE_STR];
          const tasks = target[symbolEventName];
          const captureTasks = target[symbolCaptureEventName];
          if (tasks) {
            const removeTasks = tasks.slice();
            for (let i = 0; i &lt; removeTasks.length; i++) {
              const task = removeTasks[i];
              let delegate = task.originalDelegate ? task.originalDelegate : task.callback;
              this[REMOVE_EVENT_LISTENER].call(this, eventName, delegate, task.options);
            }
          }
          if (captureTasks) {
            const removeTasks = captureTasks.slice();
            for (let i = 0; i &lt; removeTasks.length; i++) {
              const task = removeTasks[i];
              let delegate = task.originalDelegate ? task.originalDelegate : task.callback;
              this[REMOVE_EVENT_LISTENER].call(this, eventName, delegate, task.options);
            }
          }
        }
      }
      if (returnTarget) {
        return this;
      }
    };
    // for native toString patch
    attachOriginToPatched(proto[ADD_EVENT_LISTENER], nativeAddEventListener);
    attachOriginToPatched(proto[REMOVE_EVENT_LISTENER], nativeRemoveEventListener);
    if (nativeRemoveAllListeners) {
      attachOriginToPatched(proto[REMOVE_ALL_LISTENERS_EVENT_LISTENER], nativeRemoveAllListeners);
    }
    if (nativeListeners) {
      attachOriginToPatched(proto[LISTENERS_EVENT_LISTENER], nativeListeners);
    }
    return true;
  }
  let results = [];
  for (let i = 0; i &lt; apis.length; i++) {
    results[i] = patchEventTargetMethods(apis[i], patchOptions);
  }
  return results;
}
function findEventTasks(target, eventName) {
  if (!eventName) {
    const foundTasks = [];
    for (let prop in target) {
      const match = EVENT_NAME_SYMBOL_REGX.exec(prop);
      let evtName = match &amp;&amp; match[1];
      if (evtName &amp;&amp; (!eventName || evtName === eventName)) {
        const tasks = target[prop];
        if (tasks) {
          for (let i = 0; i &lt; tasks.length; i++) {
            foundTasks.push(tasks[i]);
          }
        }
      }
    }
    return foundTasks;
  }
  let symbolEventName = zoneSymbolEventNames[eventName];
  if (!symbolEventName) {
    prepareEventNames(eventName);
    symbolEventName = zoneSymbolEventNames[eventName];
  }
  const captureFalseTasks = target[symbolEventName[FALSE_STR]];
  const captureTrueTasks = target[symbolEventName[TRUE_STR]];
  if (!captureFalseTasks) {
    return captureTrueTasks ? captureTrueTasks.slice() : [];
  } else {
    return captureTrueTasks ? captureFalseTasks.concat(captureTrueTasks) : captureFalseTasks.slice();
  }
}
function patchEventPrototype(global, api) {
  const Event = global['Event'];
  if (Event &amp;&amp; Event.prototype) {
    api.patchMethod(Event.prototype, 'stopImmediatePropagation', delegate =&gt; function (self, args) {
      self[IMMEDIATE_PROPAGATION_SYMBOL] = true;
      // we need to call the native stopImmediatePropagation
      // in case in some hybrid application, some part of
      // application will be controlled by zone, some are not
      delegate &amp;&amp; delegate.apply(self, args);
    });
  }
}
function patchCallbacks(api, target, targetName, method, callbacks) {
  const symbol = Zone.__symbol__(method);
  if (target[symbol]) {
    return;
  }
  const nativeDelegate = target[symbol] = target[method];
  target[method] = function (name, opts, options) {
    if (opts &amp;&amp; opts.prototype) {
      callbacks.forEach(function (callback) {
        const source = `${targetName}.${method}::` + callback;
        const prototype = opts.prototype;
        // Note: the `patchCallbacks` is used for patching the `document.registerElement` and
        // `customElements.define`. We explicitly wrap the patching code into try-catch since
        // callbacks may be already patched by other web components frameworks (e.g. LWC), and they
        // make those properties non-writable. This means that patching callback will throw an error
        // `cannot assign to read-only property`. See this code as an example:
        // https://github.com/salesforce/lwc/blob/master/packages/@lwc/engine-core/src/framework/base-bridge-element.ts#L180-L186
        // We don't want to stop the application rendering if we couldn't patch some
        // callback, e.g. `attributeChangedCallback`.
        try {
          if (prototype.hasOwnProperty(callback)) {
            const descriptor = api.ObjectGetOwnPropertyDescriptor(prototype, callback);
            if (descriptor &amp;&amp; descriptor.value) {
              descriptor.value = api.wrapWithCurrentZone(descriptor.value, source);
              api._redefineProperty(opts.prototype, callback, descriptor);
            } else if (prototype[callback]) {
              prototype[callback] = api.wrapWithCurrentZone(prototype[callback], source);
            }
          } else if (prototype[callback]) {
            prototype[callback] = api.wrapWithCurrentZone(prototype[callback], source);
          }
        } catch {
          // Note: we leave the catch block empty since there's no way to handle the error related
          // to non-writable property.
        }
      });
    }
    return nativeDelegate.call(target, name, opts, options);
  };
  api.attachOriginToPatched(target[method], nativeDelegate);
}

/**
 * @fileoverview
 * @suppress {globalThis}
 */
function filterProperties(target, onProperties, ignoreProperties) {
  if (!ignoreProperties || ignoreProperties.length === 0) {
    return onProperties;
  }
  const tip = ignoreProperties.filter(ip =&gt; ip.target === target);
  if (!tip || tip.length === 0) {
    return onProperties;
  }
  const targetIgnoreProperties = tip[0].ignoreProperties;
  return onProperties.filter(op =&gt; targetIgnoreProperties.indexOf(op) === -1);
}
function patchFilteredProperties(target, onProperties, ignoreProperties, prototype) {
  // check whether target is available, sometimes target will be undefined
  // because different browser or some 3rd party plugin.
  if (!target) {
    return;
  }
  const filteredProperties = filterProperties(target, onProperties, ignoreProperties);
  patchOnProperties(target, filteredProperties, prototype);
}
/**
 * Get all event name properties which the event name startsWith `on`
 * from the target object itself, inherited properties are not considered.
 */
function getOnEventNames(target) {
  return Object.getOwnPropertyNames(target).filter(name =&gt; name.startsWith('on') &amp;&amp; name.length &gt; 2).map(name =&gt; name.substring(2));
}
function propertyDescriptorPatch(api, _global) {
  if (isNode &amp;&amp; !isMix) {
    return;
  }
  if (Zone[api.symbol('patchEvents')]) {
    // events are already been patched by legacy patch.
    return;
  }
  const ignoreProperties = _global['__Zone_ignore_on_properties'];
  // for browsers that we can patch the descriptor:  Chrome &amp; Firefox
  let patchTargets = [];
  if (isBrowser) {
    const internalWindow = window;
    patchTargets = patchTargets.concat(['Document', 'SVGElement', 'Element', 'HTMLElement', 'HTMLBodyElement', 'HTMLMediaElement', 'HTMLFrameSetElement', 'HTMLFrameElement', 'HTMLIFrameElement', 'HTMLMarqueeElement', 'Worker']);
    const ignoreErrorProperties = isIE() ? [{
      target: internalWindow,
      ignoreProperties: ['error']
    }] : [];
    // in IE/Edge, onProp not exist in window object, but in WindowPrototype
    // so we need to pass WindowPrototype to check onProp exist or not
    patchFilteredProperties(internalWindow, getOnEventNames(internalWindow), ignoreProperties ? ignoreProperties.concat(ignoreErrorProperties) : ignoreProperties, ObjectGetPrototypeOf(internalWindow));
  }
  patchTargets = patchTargets.concat(['XMLHttpRequest', 'XMLHttpRequestEventTarget', 'IDBIndex', 'IDBRequest', 'IDBOpenDBRequest', 'IDBDatabase', 'IDBTransaction', 'IDBCursor', 'WebSocket']);
  for (let i = 0; i &lt; patchTargets.length; i++) {
    const target = _global[patchTargets[i]];
    target &amp;&amp; target.prototype &amp;&amp; patchFilteredProperties(target.prototype, getOnEventNames(target.prototype), ignoreProperties);
  }
}
Zone.__load_patch('util', (global, Zone, api) =&gt; {
  // Collect native event names by looking at properties
  // on the global namespace, e.g. 'onclick'.
  const eventNames = getOnEventNames(global);
  api.patchOnProperties = patchOnProperties;
  api.patchMethod = patchMethod;
  api.bindArguments = bindArguments;
  api.patchMacroTask = patchMacroTask;
  // In earlier version of zone.js (&lt;0.9.0), we use env name `__zone_symbol__BLACK_LISTED_EVENTS` to
  // define which events will not be patched by `Zone.js`.
  // In newer version (&gt;=0.9.0), we change the env name to `__zone_symbol__UNPATCHED_EVENTS` to keep
  // the name consistent with angular repo.
  // The  `__zone_symbol__BLACK_LISTED_EVENTS` is deprecated, but it is still be supported for
  // backwards compatibility.
  const SYMBOL_BLACK_LISTED_EVENTS = Zone.__symbol__('BLACK_LISTED_EVENTS');
  const SYMBOL_UNPATCHED_EVENTS = Zone.__symbol__('UNPATCHED_EVENTS');
  if (global[SYMBOL_UNPATCHED_EVENTS]) {
    global[SYMBOL_BLACK_LISTED_EVENTS] = global[SYMBOL_UNPATCHED_EVENTS];
  }
  if (global[SYMBOL_BLACK_LISTED_EVENTS]) {
    Zone[SYMBOL_BLACK_LISTED_EVENTS] = Zone[SYMBOL_UNPATCHED_EVENTS] = global[SYMBOL_BLACK_LISTED_EVENTS];
  }
  api.patchEventPrototype = patchEventPrototype;
  api.patchEventTarget = patchEventTarget;
  api.isIEOrEdge = isIEOrEdge;
  api.ObjectDefineProperty = ObjectDefineProperty;
  api.ObjectGetOwnPropertyDescriptor = ObjectGetOwnPropertyDescriptor;
  api.ObjectCreate = ObjectCreate;
  api.ArraySlice = ArraySlice;
  api.patchClass = patchClass;
  api.wrapWithCurrentZone = wrapWithCurrentZone;
  api.filterProperties = filterProperties;
  api.attachOriginToPatched = attachOriginToPatched;
  api._redefineProperty = Object.defineProperty;
  api.patchCallbacks = patchCallbacks;
  api.getGlobalObjects = () =&gt; ({
    globalSources,
    zoneSymbolEventNames,
    eventNames,
    isBrowser,
    isMix,
    isNode,
    TRUE_STR,
    FALSE_STR,
    ZONE_SYMBOL_PREFIX,
    ADD_EVENT_LISTENER_STR,
    REMOVE_EVENT_LISTENER_STR
  });
});

/**
 * @fileoverview
 * @suppress {missingRequire}
 */
function patchQueueMicrotask(global, api) {
  api.patchMethod(global, 'queueMicrotask', delegate =&gt; {
    return function (self, args) {
      Zone.current.scheduleMicroTask('queueMicrotask', args[0]);
    };
  });
}

/**
 * @fileoverview
 * @suppress {missingRequire}
 */
const taskSymbol = zoneSymbol('zoneTask');
function patchTimer(window, setName, cancelName, nameSuffix) {
  let setNative = null;
  let clearNative = null;
  setName += nameSuffix;
  cancelName += nameSuffix;
  const tasksByHandleId = {};
  function scheduleTask(task) {
    const data = task.data;
    data.args[0] = function () {
      return task.invoke.apply(this, arguments);
    };
    data.handleId = setNative.apply(window, data.args);
    return task;
  }
  function clearTask(task) {
    return clearNative.call(window, task.data.handleId);
  }
  setNative = patchMethod(window, setName, delegate =&gt; function (self, args) {
    if (typeof args[0] === 'function') {
      const options = {
        isPeriodic: nameSuffix === 'Interval',
        delay: nameSuffix === 'Timeout' || nameSuffix === 'Interval' ? args[1] || 0 : undefined,
        args: args
      };
      const callback = args[0];
      args[0] = function timer() {
        try {
          return callback.apply(this, arguments);
        } finally {
          // issue-934, task will be cancelled
          // even it is a periodic task such as
          // setInterval
          // https://github.com/angular/angular/issues/40387
          // Cleanup tasksByHandleId should be handled before scheduleTask
          // Since some zoneSpec may intercept and doesn't trigger
          // scheduleFn(scheduleTask) provided here.
          if (!options.isPeriodic) {
            if (typeof options.handleId === 'number') {
              // in non-nodejs env, we remove timerId
              // from local cache
              delete tasksByHandleId[options.handleId];
            } else if (options.handleId) {
              // Node returns complex objects as handleIds
              // we remove task reference from timer object
              options.handleId[taskSymbol] = null;
            }
          }
        }
      };
      const task = scheduleMacroTaskWithCurrentZone(setName, args[0], options, scheduleTask, clearTask);
      if (!task) {
        return task;
      }
      // Node.js must additionally support the ref and unref functions.
      const handle = task.data.handleId;
      if (typeof handle === 'number') {
        // for non nodejs env, we save handleId: task
        // mapping in local cache for clearTimeout
        tasksByHandleId[handle] = task;
      } else if (handle) {
        // for nodejs env, we save task
        // reference in timerId Object for clearTimeout
        handle[taskSymbol] = task;
      }
      // check whether handle is null, because some polyfill or browser
      // may return undefined from setTimeout/setInterval/setImmediate/requestAnimationFrame
      if (handle &amp;&amp; handle.ref &amp;&amp; handle.unref &amp;&amp; typeof handle.ref === 'function' &amp;&amp; typeof handle.unref === 'function') {
        task.ref = handle.ref.bind(handle);
        task.unref = handle.unref.bind(handle);
      }
      if (typeof handle === 'number' || handle) {
        return handle;
      }
      return task;
    } else {
      // cause an error by calling it directly.
      return delegate.apply(window, args);
    }
  });
  clearNative = patchMethod(window, cancelName, delegate =&gt; function (self, args) {
    const id = args[0];
    let task;
    if (typeof id === 'number') {
      // non nodejs env.
      task = tasksByHandleId[id];
    } else {
      // nodejs env.
      task = id &amp;&amp; id[taskSymbol];
      // other environments.
      if (!task) {
        task = id;
      }
    }
    if (task &amp;&amp; typeof task.type === 'string') {
      if (task.state !== 'notScheduled' &amp;&amp; (task.cancelFn &amp;&amp; task.data.isPeriodic || task.runCount === 0)) {
        if (typeof id === 'number') {
          delete tasksByHandleId[id];
        } else if (id) {
          id[taskSymbol] = null;
        }
        // Do not cancel already canceled functions
        task.zone.cancelTask(task);
      }
    } else {
      // cause an error by calling it directly.
      delegate.apply(window, args);
    }
  });
}
function patchCustomElements(_global, api) {
  const {
    isBrowser,
    isMix
  } = api.getGlobalObjects();
  if (!isBrowser &amp;&amp; !isMix || !_global['customElements'] || !('customElements' in _global)) {
    return;
  }
  const callbacks = ['connectedCallback', 'disconnectedCallback', 'adoptedCallback', 'attributeChangedCallback'];
  api.patchCallbacks(api, _global.customElements, 'customElements', 'define', callbacks);
}
function eventTargetPatch(_global, api) {
  if (Zone[api.symbol('patchEventTarget')]) {
    // EventTarget is already patched.
    return;
  }
  const {
    eventNames,
    zoneSymbolEventNames,
    TRUE_STR,
    FALSE_STR,
    ZONE_SYMBOL_PREFIX
  } = api.getGlobalObjects();
  //  predefine all __zone_symbol__ + eventName + true/false string
  for (let i = 0; i &lt; eventNames.length; i++) {
    const eventName = eventNames[i];
    const falseEventName = eventName + FALSE_STR;
    const trueEventName = eventName + TRUE_STR;
    const symbol = ZONE_SYMBOL_PREFIX + falseEventName;
    const symbolCapture = ZONE_SYMBOL_PREFIX + trueEventName;
    zoneSymbolEventNames[eventName] = {};
    zoneSymbolEventNames[eventName][FALSE_STR] = symbol;
    zoneSymbolEventNames[eventName][TRUE_STR] = symbolCapture;
  }
  const EVENT_TARGET = _global['EventTarget'];
  if (!EVENT_TARGET || !EVENT_TARGET.prototype) {
    return;
  }
  api.patchEventTarget(_global, api, [EVENT_TARGET &amp;&amp; EVENT_TARGET.prototype]);
  return true;
}
function patchEvent(global, api) {
  api.patchEventPrototype(global, api);
}

/**
 * @fileoverview
 * @suppress {missingRequire}
 */
Zone.__load_patch('legacy', global =&gt; {
  const legacyPatch = global[Zone.__symbol__('legacyPatch')];
  if (legacyPatch) {
    legacyPatch();
  }
});
Zone.__load_patch('timers', global =&gt; {
  const set = 'set';
  const clear = 'clear';
  patchTimer(global, set, clear, 'Timeout');
  patchTimer(global, set, clear, 'Interval');
  patchTimer(global, set, clear, 'Immediate');
});
Zone.__load_patch('requestAnimationFrame', global =&gt; {
  patchTimer(global, 'request', 'cancel', 'AnimationFrame');
  patchTimer(global, 'mozRequest', 'mozCancel', 'AnimationFrame');
  patchTimer(global, 'webkitRequest', 'webkitCancel', 'AnimationFrame');
});
Zone.__load_patch('blocking', (global, Zone) =&gt; {
  const blockingMethods = ['alert', 'prompt', 'confirm'];
  for (let i = 0; i &lt; blockingMethods.length; i++) {
    const name = blockingMethods[i];
    patchMethod(global, name, (delegate, symbol, name) =&gt; {
      return function (s, args) {
        return Zone.current.run(delegate, global, args, name);
      };
    });
  }
});
Zone.__load_patch('EventTarget', (global, Zone, api) =&gt; {
  patchEvent(global, api);
  eventTargetPatch(global, api);
  // patch XMLHttpRequestEventTarget's addEventListener/removeEventListener
  const XMLHttpRequestEventTarget = global['XMLHttpRequestEventTarget'];
  if (XMLHttpRequestEventTarget &amp;&amp; XMLHttpRequestEventTarget.prototype) {
    api.patchEventTarget(global, api, [XMLHttpRequestEventTarget.prototype]);
  }
});
Zone.__load_patch('MutationObserver', (global, Zone, api) =&gt; {
  patchClass('MutationObserver');
  patchClass('WebKitMutationObserver');
});
Zone.__load_patch('IntersectionObserver', (global, Zone, api) =&gt; {
  patchClass('IntersectionObserver');
});
Zone.__load_patch('FileReader', (global, Zone, api) =&gt; {
  patchClass('FileReader');
});
Zone.__load_patch('on_property', (global, Zone, api) =&gt; {
  propertyDescriptorPatch(api, global);
});
Zone.__load_patch('customElements', (global, Zone, api) =&gt; {
  patchCustomElements(global, api);
});
Zone.__load_patch('XHR', (global, Zone) =&gt; {
  // Treat XMLHttpRequest as a macrotask.
  patchXHR(global);
  const XHR_TASK = zoneSymbol('xhrTask');
  const XHR_SYNC = zoneSymbol('xhrSync');
  const XHR_LISTENER = zoneSymbol('xhrListener');
  const XHR_SCHEDULED = zoneSymbol('xhrScheduled');
  const XHR_URL = zoneSymbol('xhrURL');
  const XHR_ERROR_BEFORE_SCHEDULED = zoneSymbol('xhrErrorBeforeScheduled');
  function patchXHR(window) {
    const XMLHttpRequest = window['XMLHttpRequest'];
    if (!XMLHttpRequest) {
      // XMLHttpRequest is not available in service worker
      return;
    }
    const XMLHttpRequestPrototype = XMLHttpRequest.prototype;
    function findPendingTask(target) {
      return target[XHR_TASK];
    }
    let oriAddListener = XMLHttpRequestPrototype[ZONE_SYMBOL_ADD_EVENT_LISTENER];
    let oriRemoveListener = XMLHttpRequestPrototype[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];
    if (!oriAddListener) {
      const XMLHttpRequestEventTarget = window['XMLHttpRequestEventTarget'];
      if (XMLHttpRequestEventTarget) {
        const XMLHttpRequestEventTargetPrototype = XMLHttpRequestEventTarget.prototype;
        oriAddListener = XMLHttpRequestEventTargetPrototype[ZONE_SYMBOL_ADD_EVENT_LISTENER];
        oriRemoveListener = XMLHttpRequestEventTargetPrototype[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];
      }
    }
    const READY_STATE_CHANGE = 'readystatechange';
    const SCHEDULED = 'scheduled';
    function scheduleTask(task) {
      const data = task.data;
      const target = data.target;
      target[XHR_SCHEDULED] = false;
      target[XHR_ERROR_BEFORE_SCHEDULED] = false;
      // remove existing event listener
      const listener = target[XHR_LISTENER];
      if (!oriAddListener) {
        oriAddListener = target[ZONE_SYMBOL_ADD_EVENT_LISTENER];
        oriRemoveListener = target[ZONE_SYMBOL_REMOVE_EVENT_LISTENER];
      }
      if (listener) {
        oriRemoveListener.call(target, READY_STATE_CHANGE, listener);
      }
      const newListener = target[XHR_LISTENER] = () =&gt; {
        if (target.readyState === target.DONE) {
          // sometimes on some browsers XMLHttpRequest will fire onreadystatechange with
          // readyState=4 multiple times, so we need to check task state here
          if (!data.aborted &amp;&amp; target[XHR_SCHEDULED] &amp;&amp; task.state === SCHEDULED) {
            // check whether the xhr has registered onload listener
            // if that is the case, the task should invoke after all
            // onload listeners finish.
            // Also if the request failed without response (status = 0), the load event handler
            // will not be triggered, in that case, we should also invoke the placeholder callback
            // to close the XMLHttpRequest::send macroTask.
            // https://github.com/angular/angular/issues/38795
            const loadTasks = target[Zone.__symbol__('loadfalse')];
            if (target.status !== 0 &amp;&amp; loadTasks &amp;&amp; loadTasks.length &gt; 0) {
              const oriInvoke = task.invoke;
              task.invoke = function () {
                // need to load the tasks again, because in other
                // load listener, they may remove themselves
                const loadTasks = target[Zone.__symbol__('loadfalse')];
                for (let i = 0; i &lt; loadTasks.length; i++) {
                  if (loadTasks[i] === task) {
                    loadTasks.splice(i, 1);
                  }
                }
                if (!data.aborted &amp;&amp; task.state === SCHEDULED) {
                  oriInvoke.call(task);
                }
              };
              loadTasks.push(task);
            } else {
              task.invoke();
            }
          } else if (!data.aborted &amp;&amp; target[XHR_SCHEDULED] === false) {
            // error occurs when xhr.send()
            target[XHR_ERROR_BEFORE_SCHEDULED] = true;
          }
        }
      };
      oriAddListener.call(target, READY_STATE_CHANGE, newListener);
      const storedTask = target[XHR_TASK];
      if (!storedTask) {
        target[XHR_TASK] = task;
      }
      sendNative.apply(target, data.args);
      target[XHR_SCHEDULED] = true;
      return task;
    }
    function placeholderCallback() {}
    function clearTask(task) {
      const data = task.data;
      // Note - ideally, we would call data.target.removeEventListener here, but it's too late
      // to prevent it from firing. So instead, we store info for the event listener.
      data.aborted = true;
      return abortNative.apply(data.target, data.args);
    }
    const openNative = patchMethod(XMLHttpRequestPrototype, 'open', () =&gt; function (self, args) {
      self[XHR_SYNC] = args[2] == false;
      self[XHR_URL] = args[1];
      return openNative.apply(self, args);
    });
    const XMLHTTPREQUEST_SOURCE = 'XMLHttpRequest.send';
    const fetchTaskAborting = zoneSymbol('fetchTaskAborting');
    const fetchTaskScheduling = zoneSymbol('fetchTaskScheduling');
    const sendNative = patchMethod(XMLHttpRequestPrototype, 'send', () =&gt; function (self, args) {
      if (Zone.current[fetchTaskScheduling] === true) {
        // a fetch is scheduling, so we are using xhr to polyfill fetch
        // and because we already schedule macroTask for fetch, we should
        // not schedule a macroTask for xhr again
        return sendNative.apply(self, args);
      }
      if (self[XHR_SYNC]) {
        // if the XHR is sync there is no task to schedule, just execute the code.
        return sendNative.apply(self, args);
      } else {
        const options = {
          target: self,
          url: self[XHR_URL],
          isPeriodic: false,
          args: args,
          aborted: false
        };
        const task = scheduleMacroTaskWithCurrentZone(XMLHTTPREQUEST_SOURCE, placeholderCallback, options, scheduleTask, clearTask);
        if (self &amp;&amp; self[XHR_ERROR_BEFORE_SCHEDULED] === true &amp;&amp; !options.aborted &amp;&amp; task.state === SCHEDULED) {
          // xhr request throw error when send
          // we should invoke task instead of leaving a scheduled
          // pending macroTask
          task.invoke();
        }
      }
    });
    const abortNative = patchMethod(XMLHttpRequestPrototype, 'abort', () =&gt; function (self, args) {
      const task = findPendingTask(self);
      if (task &amp;&amp; typeof task.type == 'string') {
        // If the XHR has already completed, do nothing.
        // If the XHR has already been aborted, do nothing.
        // Fix #569, call abort multiple times before done will cause
        // macroTask task count be negative number
        if (task.cancelFn == null || task.data &amp;&amp; task.data.aborted) {
          return;
        }
        task.zone.cancelTask(task);
      } else if (Zone.current[fetchTaskAborting] === true) {
        // the abort is called from fetch polyfill, we need to call native abort of XHR.
        return abortNative.apply(self, args);
      }
      // Otherwise, we are trying to abort an XHR which has not yet been sent, so there is no
      // task
      // to cancel. Do nothing.
    });
  }
});

Zone.__load_patch('geolocation', global =&gt; {
  /// GEO_LOCATION
  if (global['navigator'] &amp;&amp; global['navigator'].geolocation) {
    patchPrototype(global['navigator'].geolocation, ['getCurrentPosition', 'watchPosition']);
  }
});
Zone.__load_patch('PromiseRejectionEvent', (global, Zone) =&gt; {
  // handle unhandled promise rejection
  function findPromiseRejectionHandler(evtName) {
    return function (e) {
      const eventTasks = findEventTasks(global, evtName);
      eventTasks.forEach(eventTask =&gt; {
        // windows has added unhandledrejection event listener
        // trigger the event listener
        const PromiseRejectionEvent = global['PromiseRejectionEvent'];
        if (PromiseRejectionEvent) {
          const evt = new PromiseRejectionEvent(evtName, {
            promise: e.promise,
            reason: e.rejection
          });
          eventTask.invoke(evt);
        }
      });
    };
  }
  if (global['PromiseRejectionEvent']) {
    Zone[zoneSymbol('unhandledPromiseRejectionHandler')] = findPromiseRejectionHandler('unhandledrejection');
    Zone[zoneSymbol('rejectionHandledHandler')] = findPromiseRejectionHandler('rejectionhandled');
  }
});
Zone.__load_patch('queueMicrotask', (global, Zone, api) =&gt; {
  patchQueueMicrotask(global, api);
});

/***/ })

},
/******/ __webpack_require__ =&gt; { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) =&gt; (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__(76657));
/******/ }
]);
//# sourceMappingURL=polyfills.js.map</code></pre>
                                  </details>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Evidence</th>
                                <td>
                                  <pre><code>bugs</code></pre>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    Remove all comments that return information
                                    that may help an attacker and fix any
                                    underlying problems they refer to.
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>

                  <li>
                    <h5>
                      <a href="#alert-type-8"
                        >Re-examine Cache-control Directives</a
                      >
                      <span>(1)</span>
                    </h5>
                    <ol>
                      <li>
                        <details>
                          <summary>
                            <span class="request-method-n-url"
                              >POST https://localhost:3000/api/register</span
                            >
                          </summary>

                          <table class="alerts-table">
                            <tbody>
                              <tr>
                                <th scope="row">Alert tags</th>
                                <td>
                                  <ul class="alert-tags-list">
                                    <li>
                                      <span
                                        ><a
                                          href="https://owasp.org/www-project-web-security-testing-guide/v42/4-Web_Application_Security_Testing/04-Authentication_Testing/06-Testing_for_Browser_Cache_Weaknesses"
                                          >WSTG-v42-ATHN-06</a
                                        ></span
                                      >
                                    </li>
                                  </ul>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Alert description</th>
                                <td>
                                  <p>
                                    The cache-control header has not been set
                                    properly or is missing, allowing the browser
                                    and proxies to cache content. For static
                                    assets like css, js, or image files this
                                    might be intended, however, the resources
                                    should be reviewed to ensure that no
                                    sensitive content will be cached.
                                  </p>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Request</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Request line and header section (338
                                      bytes)
                                    </summary>

                                    <pre><code>POST https://localhost:3000/api/register HTTP/1.1
host: localhost:3000
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36
pragma: no-cache
cache-control: no-cache
accept: application/json
content-type: application/x-www-form-urlencoded
content-length: 49

</code></pre>
                                  </details>
                                  <details class="request-body" open="open">
                                    <summary>Request body (49 bytes)</summary>

                                    <pre><code>email=zaproxy%40example.com&amp;name=ZAP&amp;password=ZAP</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Response</th>
                                <td>
                                  <details open="open">
                                    <summary>
                                      Status line and header section (335 bytes)
                                    </summary>

                                    <pre><code>HTTP/1.1 200 OK
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Access-Control-Allow-Origin: *
Content-Type: application/json; charset=utf-8
Content-Length: 284
ETag: W/"11c-VA+CMe93G6zLMWQGEiSn0iIaaQw"
Date: Sun, 19 Nov 2023 10:12:33 GMT
Connection: keep-alive
Keep-Alive: timeout=5

</code></pre>
                                  </details>
                                  <details class="response-body" open="open">
                                    <summary>Response body (284 bytes)</summary>

                                    <pre><code>{"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NTU5ZGY5MTg3M2ZlNjk3MjljYWVjMTUiLCJlbWFpbCI6InphcHJveHlAZXhhbXBsZS5jb20iLCJuYW1lIjoiWkFQIiwicm9sZSI6InVzZXIiLCJmaXNoaW5nR3JvdXAiOltdLCJleHAiOjE3MDA5OTM1NTMsImlhdCI6MTcwMDM4ODc1M30.UdUGHO7rAocHeAhfuK_XpNoaNlfinMko2Gi11v7mXO0"}</code></pre>
                                  </details>
                                </td>
                              </tr>
                              <tr>
                                <th scope="row">Parameter</th>
                                <td>
                                  <pre><code>cache-control</code></pre>
                                </td>
                              </tr>

                              <tr>
                                <th scope="row">Solution</th>
                                <td>
                                  <p>
                                    For secure content, ensure the cache-control
                                    HTTP header is set with "no-cache, no-store,
                                    must-revalidate". If an asset should be
                                    cached consider setting the directives
                                    "public, max-age, immutable".
                                  </p>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </details>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
        </ol>
      </section>

      <section id="appendix" class="appendix">
        <h2>Appendix</h2>

        <section id="alert-types" class="alert-types">
          <h3>Alert types</h3>
          <p class="alert-types-intro">
            This section contains additional information on the types of alerts
            in the report.
          </p>
          <ol>
            <li id="alert-type-0">
              <h4>Application Error Disclosure</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/90022/"
                          >Application Error Disclosure</a
                        >)
                      </span>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">CWE ID</th>
                    <td>
                      <a href="https://cwe.mitre.org/data/definitions/200.html"
                        >200</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">WASC ID</th>
                    <td>13</td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-1">
              <h4>Content Security Policy (CSP) Header Not Set</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10038/"
                          >Content Security Policy (CSP) Header Not Set</a
                        >)
                      </span>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">CWE ID</th>
                    <td>
                      <a href="https://cwe.mitre.org/data/definitions/693.html"
                        >693</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">WASC ID</th>
                    <td>15</td>
                  </tr>
                  <tr>
                    <th scope="row">Reference</th>
                    <td>
                      <ol>
                        <li>
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/Security/CSP/Introducing_Content_Security_Policy"
                            >https://developer.mozilla.org/en-US/docs/Web/Security/CSP/Introducing_Content_Security_Policy</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html"
                            >https://cheatsheetseries.owasp.org/cheatsheets/Content_Security_Policy_Cheat_Sheet.html</a
                          >
                        </li>
                        <li>
                          <a href="http://www.w3.org/TR/CSP/"
                            >http://www.w3.org/TR/CSP/</a
                          >
                        </li>
                        <li>
                          <a
                            href="http://w3c.github.io/webappsec/specs/content-security-policy/csp-specification.dev.html"
                            >http://w3c.github.io/webappsec/specs/content-security-policy/csp-specification.dev.html</a
                          >
                        </li>
                        <li>
                          <a
                            href="http://www.html5rocks.com/en/tutorials/security/content-security-policy/"
                            >http://www.html5rocks.com/en/tutorials/security/content-security-policy/</a
                          >
                        </li>
                        <li>
                          <a
                            href="http://caniuse.com/#feat=contentsecuritypolicy"
                            >http://caniuse.com/#feat=contentsecuritypolicy</a
                          >
                        </li>
                        <li>
                          <a href="http://content-security-policy.com/"
                            >http://content-security-policy.com/</a
                          >
                        </li>
                      </ol>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-2">
              <h4>Cross-Domain Misconfiguration</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10098/"
                          >Cross-Domain Misconfiguration</a
                        >)
                      </span>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">CWE ID</th>
                    <td>
                      <a href="https://cwe.mitre.org/data/definitions/264.html"
                        >264</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">WASC ID</th>
                    <td>14</td>
                  </tr>
                  <tr>
                    <th scope="row">Reference</th>
                    <td>
                      <ol>
                        <li>
                          <a
                            href="https://vulncat.fortify.com/en/detail?id=desc.config.dotnet.html5_overly_permissive_cors_policy"
                            >https://vulncat.fortify.com/en/detail?id=desc.config.dotnet.html5_overly_permissive_cors_policy</a
                          >
                        </li>
                      </ol>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-3">
              <h4>Information Disclosure - Debug Error Messages</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10023/"
                          >Information Disclosure - Debug Error Messages</a
                        >)
                      </span>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">CWE ID</th>
                    <td>
                      <a href="https://cwe.mitre.org/data/definitions/200.html"
                        >200</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">WASC ID</th>
                    <td>13</td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-4">
              <h4>Strict-Transport-Security Header Not Set</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10035/"
                          >Strict-Transport-Security Header</a
                        >)
                      </span>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">CWE ID</th>
                    <td>
                      <a href="https://cwe.mitre.org/data/definitions/319.html"
                        >319</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">WASC ID</th>
                    <td>15</td>
                  </tr>
                  <tr>
                    <th scope="row">Reference</th>
                    <td>
                      <ol>
                        <li>
                          <a
                            href="https://cheatsheetseries.owasp.org/cheatsheets/HTTP_Strict_Transport_Security_Cheat_Sheet.html"
                            >https://cheatsheetseries.owasp.org/cheatsheets/HTTP_Strict_Transport_Security_Cheat_Sheet.html</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://owasp.org/www-community/Security_Headers"
                            >https://owasp.org/www-community/Security_Headers</a
                          >
                        </li>
                        <li>
                          <a
                            href="http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security"
                            >http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security</a
                          >
                        </li>
                        <li>
                          <a href="http://caniuse.com/stricttransportsecurity"
                            >http://caniuse.com/stricttransportsecurity</a
                          >
                        </li>
                        <li>
                          <a href="http://tools.ietf.org/html/rfc6797"
                            >http://tools.ietf.org/html/rfc6797</a
                          >
                        </li>
                      </ol>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-5">
              <h4>Authentication Request Identified</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10111/"
                          >Authentication Request Identified</a
                        >)
                      </span>
                    </td>
                  </tr>

                  <tr>
                    <th scope="row">Reference</th>
                    <td>
                      <ol>
                        <li>
                          <a
                            href="https://www.zaproxy.org/docs/desktop/addons/authentication-helper/auth-req-id/"
                            >https://www.zaproxy.org/docs/desktop/addons/authentication-helper/auth-req-id/</a
                          >
                        </li>
                      </ol>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-6">
              <h4>Information Disclosure - Suspicious Comments</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10027/"
                          >Information Disclosure - Suspicious Comments</a
                        >)
                      </span>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">CWE ID</th>
                    <td>
                      <a href="https://cwe.mitre.org/data/definitions/200.html"
                        >200</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">WASC ID</th>
                    <td>13</td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-7">
              <h4>Modern Web Application</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10109/"
                          >Modern Web Application</a
                        >)
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-8">
              <h4>Re-examine Cache-control Directives</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10015/"
                          >Re-examine Cache-control Directives</a
                        >)
                      </span>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">CWE ID</th>
                    <td>
                      <a href="https://cwe.mitre.org/data/definitions/525.html"
                        >525</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th scope="row">WASC ID</th>
                    <td>13</td>
                  </tr>
                  <tr>
                    <th scope="row">Reference</th>
                    <td>
                      <ol>
                        <li>
                          <a
                            href="https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html#web-content-caching"
                            >https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html#web-content-caching</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control"
                            >https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control</a
                          >
                        </li>
                        <li>
                          <a
                            href="https://grayduck.mn/2021/09/13/cache-control-recommendations/"
                            >https://grayduck.mn/2021/09/13/cache-control-recommendations/</a
                          >
                        </li>
                      </ol>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-9">
              <h4>Session Management Response Identified</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by a passive scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10112/"
                          >Session Management Response Identified</a
                        >)
                      </span>
                    </td>
                  </tr>

                  <tr>
                    <th scope="row">Reference</th>
                    <td>
                      <ol>
                        <li>
                          <a
                            href="https://www.zaproxy.org/docs/desktop/addons/authentication-helper/session-mgmt-id"
                            >https://www.zaproxy.org/docs/desktop/addons/authentication-helper/session-mgmt-id</a
                          >
                        </li>
                      </ol>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li id="alert-type-10">
              <h4>User Agent Fuzzer</h4>
              <table class="alert-types-table">
                <tbody>
                  <tr>
                    <th scope="row">Source</th>
                    <td>
                      <span>raised by an active scanner</span>
                      <span
                        >(<a href="https://www.zaproxy.org/docs/alerts/10104/"
                          >User Agent Fuzzer</a
                        >)
                      </span>
                    </td>
                  </tr>

                  <tr>
                    <th scope="row">Reference</th>
                    <td>
                      <ol>
                        <li>
                          <a href="https://owasp.org/wstg"
                            >https://owasp.org/wstg</a
                          >
                        </li>
                      </ol>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
          </ol>
        </section>
      </section>
    </main>
  </body>
</html>
